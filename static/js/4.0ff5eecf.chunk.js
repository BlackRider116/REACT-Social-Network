(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{508:function(e,a,s){e.exports=s.p+"static/media/avatarDefault.6c93098b.jpg"},510:function(e,a,s){"use strict";s.d(a,"a",(function(){return d}));var t=s(70),n=s(71),r=s(73),i=s(72),l=s(74),o=s(0),c=s.n(o),g=s(62),u=s(29),m=function(e){return{isAuth:e.auth.isAuth}},d=function(e){var a=function(a){function s(){return Object(t.a)(this,s),Object(r.a)(this,Object(i.a)(s).apply(this,arguments))}return Object(l.a)(s,a),Object(n.a)(s,[{key:"render",value:function(){return this.props.isAuth?c.a.createElement(e,this.props):c.a.createElement(g.a,{to:"/login"})}}]),s}(c.a.Component);return Object(u.b)(m)(a)}},511:function(e,a,s){e.exports={dialogsPage:"Dialogs_dialogsPage__Vj-n5",cardDialogs:"Dialogs_cardDialogs__1uSuo",dialogUser:"Dialogs_dialogUser__3ZW-R",dialogUser_active:"Dialogs_dialogUser_active__Gv5WR",dialogUser_Item:"Dialogs_dialogUser_Item__3Msgq",activeName:"Dialogs_activeName__2eTHX",message:"Dialogs_message__2tLdL",message_card:"Dialogs_message_card__3_tVC",message_card_select:"Dialogs_message_card_select__3US-J",message_delete:"Dialogs_message_delete__347JM",message_left:"Dialogs_message_left__3qHEf",message_right:"Dialogs_message_right__2SbB4",message_data_right:"Dialogs_message_data_right__OoqIP",message_data_left:"Dialogs_message_data_left__1MamM",message_viewed:"Dialogs_message_viewed__275qw",input:"Dialogs_input__Ed3Pc"}},539:function(e,a,s){"use strict";s.r(a);var t=s(70),n=s(71),r=s(73),i=s(72),l=s(74),o=s(0),c=s.n(o),g=s(29),u=s(510),m=s(17),d=s(511),_=s.n(d),p=s(184),h=s(34),f=s(508),D=s.n(f),M=s(506),v=s(512),E=s(514),k=s.n(E),I=function(e){return c.a.createElement(M.a,{className:_.a.cardDialogs},c.a.createElement(v.Scrollbars,{style:{width:"100%",height:"100%"}},e.userInfo.map((function(a){return c.a.createElement(M.a,{key:a.id,className:e.openUserDialogsId===a.id?"".concat(_.a.dialogUser," ").concat(_.a.dialogUser_active):_.a.dialogUser},c.a.createElement("div",{className:_.a.dialogUser_Item},c.a.createElement(h.b,{to:"/profile/".concat(a.id)},c.a.createElement("img",{alt:a.id,src:a.photos.small?a.photos.small:D.a})),c.a.createElement(h.b,{to:"/dialogs/".concat(a.id),onClick:function(){return e.userMessages(a.id)}},c.a.createElement("div",null,a.userName),c.a.createElement("div",{style:{fontSize:"14px"}},"\u0411\u044b\u043b(a): ",c.a.createElement(k.a,{format:"DD-MM-YYYY HH:mm",style:{fontSize:"12px"}},a.lastUserActivityDate)),a.hasNewMessages&&c.a.createElement("span",{style:{fontSize:"14px",textAlign:"center",color:"red"}},"\u041d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439: ",a.newMessagesCount))))}))))},b=s(7),U=s.n(b),y=s(16),T=s(183),j=s(175),O=s(251),w=s(260),N=s(538),S=Object(O.a)({form:"newMessage"})((function(e){var a=function(){var a=Object(y.a)(U.a.mark((function a(s,t){return U.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.sendMessageThunk(e.userId,s.newMessage);case 2:t(e.reset("newMessage"));case 3:case"end":return a.stop()}}),a)})));return function(e,s){return a.apply(this,arguments)}}();return c.a.createElement("form",{onSubmit:e.handleSubmit(a)},c.a.createElement("div",{className:_.a.input},c.a.createElement(j.a,{name:"newMessage",component:"textarea",placeholder:" \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),c.a.createElement(w.a,{variant:"secondary",type:"submit"},"Ok")))})),x=function(e){var a=e.myId,s=Object(T.a)(e,["myId"]),t=s.userMessages.items||[];return c.a.createElement(M.a,{className:_.a.cardDialogs},c.a.createElement("div",{style:{height:"86vh"}},c.a.createElement(v.Scrollbars,{style:{width:"100%",height:"100%"}},t.map((function(e){return c.a.createElement("div",{key:e.id,className:"".concat(_.a.message)},c.a.createElement(M.a,{className:"".concat(e.senderId===a?_.a.message_right:_.a.message_left," ").concat(e.isSelect?"".concat(_.a.message_card_select," ").concat(_.a.message_card):_.a.message_card),onClick:function(){return s.selectMessageThunk(e.id)}},c.a.createElement("div",null,e.body.replace("<br />",""),e.isSelect&&e.senderId===a&&c.a.createElement("span",null,c.a.createElement(N.a,{className:_.a.message_delete,onClick:function(){return s.deleteMessageThunk(e)}}))),c.a.createElement(k.a,{format:"DD-MM-YYYY HH:mm",className:e.senderId===a?_.a.message_data_right:_.a.message_data_left},e.addedAt),e.senderId===a&&!e.viewed&&c.a.createElement("div",{className:_.a.message_viewed},"\u043d\u0435 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043e")))})))),-1!==s.openUserDialogsId&&c.a.createElement(S,{sendMessageThunk:s.sendMessageThunk,userId:s.openUserDialogsId}))},A=s(76),P=function(e){function a(){return Object(t.a)(this,a),Object(r.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllDialogsThunk(),-1!==this.props.openUserDialogsId&&this.props.getUserMessagesThunk(this.props.openUserDialogsId)}},{key:"componentWillUnmount",value:function(){this.props.getUserMessagesThunk(-1)}},{key:"render",value:function(){return 0===this.props.usersInfo.length?c.a.createElement(A.a,null):c.a.createElement("div",{className:_.a.dialogsPage},c.a.createElement("div",null,c.a.createElement(I,{userInfo:this.props.usersInfo,userMessages:this.props.getUserMessagesThunk,openUserDialogsId:this.props.openUserDialogsId})),c.a.createElement("div",null,c.a.createElement(x,{userMessages:this.props.userMessages,openUserDialogsId:this.props.openUserDialogsId,myId:this.props.myId,sendMessageThunk:this.props.sendMessageThunk,selectMessageThunk:this.props.selectMessageThunk,deleteMessageThunk:this.props.deleteMessageThunk})))}}]),a}(c.a.Component);a.default=Object(m.d)(Object(g.b)((function(e){return{usersInfo:e.messagesPage.usersInfo,userMessages:e.messagesPage.userMessages,openUserDialogsId:e.messagesPage.openUserDialogsId,myId:e.auth.userId}}),{getAllDialogsThunk:p.c,getUserMessagesThunk:p.d,sendMessageThunk:p.f,deleteMessageThunk:p.b,selectMessageThunk:p.e}),u.a)(P)}}]);
//# sourceMappingURL=4.0ff5eecf.chunk.js.map