(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{104:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return g}));var a=n(9),r=n.n(a),o=n(20),c=n(8),i=n(16),s="/users/FOLLOW",u={users:[],usersCount:10,totalCount:0,numberPage:1,isLoading:!1},l=function(e,t,n){return e.map((function(e){return e.id===t?Object(c.a)({},e,{followed:n}):e}))},d=function(e){return{type:s,userId:e}},f=function(e){return{type:"/users/UNFOLLOW",userId:e}},m=function(e){return{type:"/users/SET_LOADING",isLoading:e}},p=function(e,t){return function(){var n=Object(o.a)(r.a.mark((function n(a){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t&&a({type:"/users/SET_NUMBER_PAGE",numberPage:t}),a(m(!0)),n.next=4,i.d.getUsers(e,t);case 4:o=n.sent,a({type:"/users/SET_USERS",users:o.items}),a({type:"/users/SET_TOTAL_COUNT",totalCount:o.totalCount}),a(m(!1));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.postFollow(e);case 2:0===t.sent.data.resultCode&&n(d(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.deleteFollow(e);case 2:0===t.sent.data.resultCode&&n(f(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(c.a)({},e,{users:l(e.users,t.userId,!0)});case"/users/UNFOLLOW":return Object(c.a)({},e,{users:l(e.users,t.userId,!1)});case"/users/SET_USERS":return Object(c.a)({},e,{users:t.users});case"/users/SET_NUMBER_PAGE":return Object(c.a)({},e,{numberPage:t.numberPage});case"/users/SET_TOTAL_COUNT":return Object(c.a)({},e,{totalCount:t.totalCount});case"/users/SET_LOADING":return Object(c.a)({},e,{isLoading:t.isLoading});default:return e}}},12:function(e,t,n){e.exports={nav:"Navbar_nav__31ocV",item:"Navbar_item__aRDoY",active:"Navbar_active__2J4Ty",setting:"Navbar_setting__23d7Q",friend:"Navbar_friend__23CFe"}},133:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__2PIQJ"}},135:function(e,t,n){e.exports=n.p+"static/media/loading.0e2358c3.gif"},16:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var a=n(129),r=a.create({baseURL:"https://social-network.samuraijs.com/api/1.0",withCredentials:!0,headers:{"API-KEY":"fc98c8d1-fcc0-4027-a270-97c3e19bdaad"}}),o={getUsers:function(e,t){return r.get("/users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))}},c={postFollow:function(e){return r.post("/follow/".concat(e))},deleteFollow:function(e){return r.delete("/follow/".concat(e))}},i={getAuth:function(){return r.get("/auth/me")},login:function(e,t,n){return r.post("/auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return r.delete("/auth/login")}},s={getProfile:function(e){return r.get("/profile/".concat(e))},getUserStatus:function(e){return r.get("/profile/status/".concat(e))},updateUserStatus:function(e){return r.put("/profile/status/",{status:e})},saveAvatarPhoto:function(e){var t=new FormData;return t.append("image",e),r.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfileInfo:function(e){return r.put("/profile",e)}}},161:function(e,t,n){e.exports=n(287)},162:function(e,t,n){},287:function(e,t,n){"use strict";n.r(t);n(162),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(7),r=n(95),o=n(94),c=n(104),i=n(9),s=n.n(i),u=n(20),l=n(8),d=n(16),f=n(30),m="/auth/me/SET_AUTH",p={userId:null,email:null,login:null,isAuth:!1},b=function(e,t,n,a){return{type:m,payload:{userId:e,email:t,login:n,isAuth:a}}},g=function(){return function(e){return d.a.getAuth().then((function(t){if(!t.data.resultCode){var n=t.data.data,a=n.id,r=n.email,o=n.login;e(b(a,r,o,!0))}}))}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)({},e,{},t.payload);default:return e}},v=n(130),E=n(128),_={initialized:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/auth/me/INITIALIZED_SUCCESS":return Object(l.a)({},e,{initialized:!0});default:return e}},O=Object(a.c)({messagesPage:r.b,profilePage:o.b,usersPage:c.a,auth:h,form:E.a,app:w}),S=Object(a.e)(O,Object(a.a)(v.a));window.store=S;var y=S,j=n(0),N=n.n(j),C=n(61),T=n.n(C),k=n(47),x=n(48),A=n(50),I=n(49),U=n(51),P=n(88),F=n.n(P),L=n(29),B=function(){return N.a.createElement("div",null,"News")},D=function(){return N.a.createElement("div",null,"Setting")},M=function(){return N.a.createElement("div",null,"Music")},R=n(133),G=n.n(R),H=function(){return N.a.createElement("div",{className:G.a.sidebar},"SIDEBAR")},z=n(12),q=n.n(z),J=n(18),W=function(e){return N.a.createElement("nav",{className:q.a.nav},N.a.createElement("div",{className:q.a.item},N.a.createElement(J.b,{to:"/profile",activeClassName:q.a.active},"Profile")),N.a.createElement("div",{className:q.a.item},N.a.createElement(J.b,{to:"/dialogs",activeClassName:q.a.active},"Messages")),N.a.createElement("div",{className:q.a.item},N.a.createElement(J.b,{to:"/news",activeClassName:q.a.active},"News")),N.a.createElement("div",{className:q.a.item},N.a.createElement(J.b,{to:"/music",activeClassName:q.a.active},"Music")),N.a.createElement("div",{className:"".concat(q.a.item," ").concat(q.a.setting)},N.a.createElement(J.b,{to:"/setting",activeClassName:q.a.active},"Setting")),N.a.createElement("div",{className:"".concat(q.a.item," ").concat(q.a.setting)},N.a.createElement(J.b,{to:"/users",activeClassName:q.a.active},"Users")))},Y=n(13),V=Object(Y.b)((function(e){return{}}))(W),X=n(34),Z=n.n(X),Q=function(e){return N.a.createElement("header",{className:Z.a.header},N.a.createElement("img",{alt:"Logotype",src:"https://liputan60.files.wordpress.com/2018/02/cropped-00106-3d-company-logo-design-free-logo-online-template-03.png?w=200"}),N.a.createElement("div",{className:Z.a.loginBlockPosition},e.isAuth?N.a.createElement("div",{className:Z.a.loginBlockName},"".concat(e.login,"   "),N.a.createElement("button",{onClick:function(){e.logout()},className:Z.a.loginBlockButton},"LOGOUT")):N.a.createElement("div",{className:Z.a.loginBlock},N.a.createElement(J.b,{to:"/login",activeClassName:Z.a.active},"LOGIN"))))},K=function(e){function t(){return Object(k.a)(this,t),Object(A.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return N.a.createElement(Q,this.props)}}]),t}(N.a.Component),$=Object(Y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.logout();case 2:e.sent.data.resultCode||t(b(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(K),ee=n(127),te=n(64),ne=n(65),ae=n(37),re=n.n(ae),oe=n(90),ce=n.n(oe),ie=Object(te.a)(30),se=Object(ee.a)({form:"login"})((function(e){return N.a.createElement("form",{onSubmit:e.handleSubmit},N.a.createElement("div",null,Object(ne.a)([te.b,ie],"email","input","Email")),N.a.createElement("div",null,Object(ne.a)([te.b,ie],"password","input","Password","password")),N.a.createElement("div",null,Object(ne.a)(null,"rememberMe","input",null,"checkbox")," remember me"),e.error&&N.a.createElement("div",{className:re.a.errorText},e.error),N.a.createElement("div",null,N.a.createElement("button",null,"Sign in")))})),ue=Object(Y.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var a=Object(u.a)(s.a.mark((function a(r){var o,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.login(e,t,n);case 2:(o=a.sent).data.resultCode?(c=o.data.messages.length>0?o.data.messages[0]:"Some Error",r(Object(f.a)("login",{_error:c}))):r(g());case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?N.a.createElement(L.a,{to:"/profile"}):N.a.createElement("div",null,N.a.createElement("h1",null,"Login"),N.a.createElement(se,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}),N.a.createElement("div",null,N.a.createElement("b",null,"Test account:"),N.a.createElement("div",{className:ce.a.tests},N.a.createElement("b",null,"Email:")," free@samuraijs.com"),N.a.createElement("div",{className:ce.a.tests},N.a.createElement("b",null,"Password:")," free")))})),le=n(60),de=function(e){return function(t){return N.a.createElement(j.Suspense,{fallback:N.a.createElement(le.a,null)},N.a.createElement(e,t))}},fe=N.a.lazy((function(){return n.e(5).then(n.bind(null,300))})),me=N.a.lazy((function(){return n.e(4).then(n.bind(null,299))})),pe=N.a.lazy((function(){return n.e(3).then(n.bind(null,298))})),be=function(e){function t(){return Object(k.a)(this,t),Object(A.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?N.a.createElement("div",{className:F.a.wrapper},N.a.createElement($,null),N.a.createElement(V,null),N.a.createElement("div",{className:F.a.content},N.a.createElement(L.d,null,N.a.createElement(L.b,{exact:!0,path:"/"},N.a.createElement(L.a,{to:"/profile"})),N.a.createElement(L.b,{path:"/profile/:userId?",render:de(pe)}),N.a.createElement(L.b,{path:"/dialogs",render:de(fe)}),N.a.createElement(L.b,{path:"/news",render:function(){return N.a.createElement(B,null)}}),N.a.createElement(L.b,{path:"/music",render:function(){return N.a.createElement(M,null)}}),N.a.createElement(L.b,{path:"/setting",render:function(){return N.a.createElement(D,null)}}),N.a.createElement(L.b,{path:"/users",render:de(me)}),N.a.createElement(L.b,{path:"/login",render:function(){return N.a.createElement(ue,null)}}),N.a.createElement(L.b,{path:"*",render:function(){return N.a.createElement("div",null,"404 NOT FOUND")}}))),N.a.createElement(H,null)):N.a.createElement(le.a,null)}}]),t}(N.a.Component),ge=Object(a.d)(Object(Y.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(g()).finally((function(){e({type:"/auth/me/INITIALIZED_SUCCESS"})}))}}}),L.g)(be);T.a.render(N.a.createElement(J.a,null,N.a.createElement(Y.a,{store:y},N.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},34:function(e,t,n){e.exports={header:"Header_header__jNHyT",loginBlockPosition:"Header_loginBlockPosition__2Xu2F",loginBlockButton:"Header_loginBlockButton__2-k02",loginBlock:"Header_loginBlock__3vzsl",active:"Header_active__2880G",loginBlockName:"Header_loginBlockName__1Zrki"}},37:function(e,t,n){e.exports={formControl:"FormControl_formControl__e7Zms",error:"FormControl_error___XZeI",errorText:"FormControl_errorText__31o7d"}},60:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(135),c=n.n(o);t.a=function(){return r.a.createElement("img",{src:c.a,alt:"Loader"})}},64:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));var a=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},o=function(e){if(!e)return""}},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(93),r=n(0),o=n.n(r),c=n(37),i=n.n(c),s=n(86),u=function(e){var t=e.input,n=e.meta,r=Object(a.a)(e,["input","meta"]),c=n.touched&&n.error;return o.a.createElement("span",{className:"".concat(i.a.formControl," ").concat(c?i.a.error:"")},"input"===r.types?o.a.createElement("input",Object.assign({},t,r)):o.a.createElement("textarea",Object.assign({},t,r)),c&&o.a.createElement("span",{className:i.a.errorText},n.error))},l=function(e,t,n,a,r){return o.a.createElement(s.a,{validate:e,name:t,placeholder:a,type:r,component:u,types:n})}},88:function(e,t,n){e.exports={wrapper:"App_wrapper__2lv4I",content:"App_content__1wn3B"}},90:function(e,t,n){e.exports={tests:"Login_tests__Hqgdu"}},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"g",(function(){return E}));var a=n(9),r=n.n(a),o=n(20),c=n(68),i=n(8),s=n(16),u=n(30),l="/profile/ADD-POST",d={posts:[{id:4,postText:"helo, how are you?",likes:10,src:"https://avatars.mds.yandex.net/get-pdb/1378807/02efeda4-5dd6-4f01-aa37-65eba04f077b/s1200"},{id:3,postText:"hdfghghdfhdfh",likes:15,src:"https://avatars.mds.yandex.net/get-pdb/1378807/02efeda4-5dd6-4f01-aa37-65eba04f077b/s1200"},{id:2,postText:"551++596",likes:7,src:"https://avatars.mds.yandex.net/get-pdb/1378807/02efeda4-5dd6-4f01-aa37-65eba04f077b/s1200"},{id:1,postText:"helo",likes:9,src:"https://avatars.mds.yandex.net/get-pdb/1378807/02efeda4-5dd6-4f01-aa37-65eba04f077b/s1200"}],profile:null,profileUpdate:null,status:""},f=function(e){return{type:l,postText:e}},m=function(e){return function(t){s.c.getProfile(e).then((function(e){t({type:"/profile/SET_USER_PROFILE",profile:e.data})}))}},p=function(e){return{type:"/profile/SET_USER_STATUS",status:e}},b=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.c.getUserStatus(e);case 2:a=t.sent,n(p(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.c.updateUserStatus(e);case 2:0===t.sent.data.resultCode&&n(p(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.c.saveAvatarPhoto(e);case 2:0===(a=t.sent).data.resultCode&&n({type:"/profile/SAVE_PHOTO_SUCCESS",photos:a.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return{type:"/profile/PROFILE_UPDATE_SUCCESS",isUpdate:e}},E=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n,a){var o,c,i,l,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().auth.userId,t.next=3,s.c.saveProfileInfo(e);case 3:0===(c=t.sent).data.resultCode?(n(m(o)),n(v(!0))):(i="","   Field is required",l="   Invalid url format","The AboutMe field is required. (AboutMe)"===(d=c.data.messages[0])&&(i={aboutMe:"   Field is required"}),"The FullName field is required. (FullName)"===d&&(i={fullName:"   Field is required"}),"The LookingForAJobDescription field is required. (LookingForAJobDescription)"===d&&(i={lookingForAJobDescription:"   Field is required"}),"Invalid url format (Contacts->Facebook)"===d&&(i={contacts:{facebook:l}}),"Invalid url format (Contacts->Website)"===d&&(i={contacts:{website:l}}),"Invalid url format (Contacts->Vk)"===d&&(i={contacts:{vk:l}}),"Invalid url format (Contacts->Twitter)"===d&&(i={contacts:{twitter:l}}),"Invalid url format (Contacts->Instagram)"===d&&(i={contacts:{instagram:l}}),"Invalid url format (Contacts->Youtube)"===d&&(i={contacts:{youtube:l}}),"Invalid url format (Contacts->Github)"===d&&(i={contacts:{github:l}}),"Invalid url format (Contacts->MainLink)"===d&&(i={contacts:{mainLink:l}}),n(Object(u.a)("profileUserInfo",i)),n(v(!1))),setTimeout((function(){n(v(null))}),1e3);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:var n=e.posts[0].id;return Object(i.a)({},e,{posts:[{id:n+1,postText:t.postText.newPost,likes:0,src:"https://www.nastol.com.ua/download.php?img=201112/1280x1024/nastol.com.ua-12179.jpg"}].concat(Object(c.a)(e.posts))});case"/profile/SET_USER_PROFILE":return Object(i.a)({},e,{profile:t.profile});case"/profile/SET_USER_STATUS":return Object(i.a)({},e,{status:t.status});case"/profile/SAVE_PHOTO_SUCCESS":return Object(i.a)({},e,{profile:Object(i.a)({},e.profile,{photos:t.photos})});case"/profile/PROFILE_UPDATE_SUCCESS":return Object(i.a)({},e,{profileUpdate:t.isUpdate});default:return e}}},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(68),r=n(8),o={usersDialog:[{name:"Nail",id:1,src:"https://www.nastol.com.ua/download.php?img=201112/1280x1024/nastol.com.ua-12179.jpg"},{name:"Dasha",id:2,src:"https://avatars.mds.yandex.net/get-pdb/1706591/9d637326-f188-44f3-8117-76c62487dcd6/s1200"},{name:"Sasha",id:3,src:"http://www.topoboi.com/pic/201312/1440x900/topoboi.com-32873.jpg"},{name:"Petr",id:4,src:"https://avatars.mds.yandex.net/get-pdb/1942078/de777b22-35ba-4f83-925a-a95bb7ded7a1/s1200"},{name:"Dinar",id:5,src:"https://www.sunhome.ru/i/wallpapers/114/koshka-v3.orig.jpg"},{name:"Gena",id:6,src:"https://yt3.ggpht.com/a/AGF-l7-FVKXYlawwwX3FPFRUmbScWaQRXNFYMTe83Q=s900-c-k-c0xffffffff-no-rj-mo"},{name:"Masha",id:7,src:"https://avatars.mds.yandex.net/get-pdb/1365646/0d7c5f19-73d0-410d-a8ed-ec7529d8a167/s1200"},{name:"Sasha",id:8,src:"https://avatars.mds.yandex.net/get-pdb/195449/6eec6f67-e740-457e-9eb7-34bcde2f7082/s1200"}],messages:[{id:1,message:"Hello"},{id:2,message:"How are you"},{id:3,message:"Good. u?"},{id:4,message:"ok"},{id:5,message:"fuck"},{id:6,message:"Yo"},{id:7,message:"BlaBla"}]},c=function(e){return{type:"/profile/ADD-MESSAGE",message:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/profile/ADD-MESSAGE":var n=e.messages[e.messages.length-1].id;return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[{id:n+1,message:t.message}])});default:return e}}}},[[161,1,2]]]);
//# sourceMappingURL=main.9e42f357.chunk.js.map