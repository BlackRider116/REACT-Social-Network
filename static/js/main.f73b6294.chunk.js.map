{"version":3,"sources":["utilities/validation/validation.ts","common/FormControl/FormControl.tsx","redux/reducers/reduceDialogs.ts","common/FormControl/FormControl.module.css","api/api.ts","common/Pagination/Pagination.tsx","App.module.scss","common/Preloader/Preloader.module.css","assets/image/loadMedia.gif","redux/reducers/reduceProfile.ts","redux/reducers/reduceUsers.ts","styles/Navbar.module.scss","assets/image/loading.gif","redux/reducers/reduceAuth.ts","common/Pagination/Pagination.module.scss","serviceWorker.js","redux/reducers/reduceApp.ts","api/apiMyBackend.ts","redux/reducers/reduceNews.ts","redux/reduxStore.ts","components/Setting/Setting.tsx","components/Music/Music.tsx","components/Navbar/Navbar.tsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","hoc/withSuspense.js","components/News/News.tsx","components/News/NewsContainer.tsx","App.tsx","index.tsx","styles/Login.module.scss","styles/Header.module.scss","styles/News.module.scss","common/Preloader/Preloader.tsx"],"names":["required","value","maxLengthCreator","maxLength","length","TextArea","Input","InputType","input","meta","props","hasError","touched","error","className","styles","formControl","types","autoSize","errorText","fieldValue","validate","name","placeholder","type","component","initialState","usersInfo","userMessages","openUserDialogsId","Number","window","location","hash","replace","newMessagesCount","actionsDialogs","payload","message","messageId","selectMessage","getAllDialogsThunk","dispatch","a","dialogsAPI","getAllDialogs","data","localStorage","removeItem","getUserMessagesThunk","userId","getListMessages","sendMessageThunk","sendMessage","response","deleteMessageThunk","getState","deleteMessage","id","stateMessageLength","messagesPage","items","selectMessageThunk","stateMessage","JSON","parse","getItem","arr","newStateMessage","map","item","isSelect","push","filter","mes","setItem","stringify","startDialogThunk","startDialogs","resultCode","newMessagesCountThunk","status","reduceDialogs","state","action","module","exports","instance","axios","create","baseURL","withCredentials","headers","usersAPI","getUsers","usersCount","numberPage","get","then","followAPI","postFollow","post","deleteFollow","delete","authAPI","getAuth","login","email","password","rememberMe","captcha","logout","getCaptcha","profileAPI","getProfile","getUserStatus","getIsFollow","updateUserStatus","put","saveAvatarPhoto","photoFile","formData","FormData","append","saveProfileInfo","profileInfo","body","maxPortionPages","pages","filterPagesNumbers","totalCount","portionNumber","portionSize","pagesCount","Math","ceil","i","leftPortionPageNumber","rightPortionPageNumber","p","Pagination","onNumberPage","pagesNumbers","portionPagesNumbers","onPagesNumbers","pagination","jump","displayNone","onClick","nextPrev","pageNumber","buttonsColor","key","localMyPosts","posts","postText","likes","src","profile","profileUpdate","isFollow","actionsProfile","setUserProfile","setUserStatus","onFollowAC","saveProtoSuccess","photos","profileUpdateSuccess","addNewPost","photo","likeDislikeMyPost","postId","boolean","deleteMyPost","deleteAllMyPosts","getProfileThunk","onFollowThunk","savePhoto","setAvatarThunk","saveProfile","auth","errText","responseError","messages","toLowerCase","slice","stopSubmitErr","facebook","website","vk","twitter","instagram","youtube","github","mainLink","errUrlFormat","stopSubmit","contacts","setTimeout","filterLikes","statePosts","reduceProfile","users","isLoading","followUnFollow","u","followed","actionsUser","getUsersThunk","usersPage","followUnFollowThunk","pagesNumbersThunk","reduceUsers","isAuth","captchaUrl","avatar","actionsAuth","getAuthThunk","messageErr","_error","getCaptha","myId","small","url","reduceAuth","Boolean","hostname","match","initialized","globalError","actionsApp","reduceApp","postsAPI","lastSeenId","catch","console","log","likeDislikeDeleteAPI","mediaApi","file","addPostFormData","firstSeenId","newPostsButton","prevPostsButton","textPost","actionsNews","setPosts","getFirstPosts","setLikes","deletePostOfState","textPostAdd","addPost","likeDislikeDeletePost","deletePostFilter","saveMediaFile","postType","reduceNews","rootReducer","combineReducers","profilePage","form","formReducer","app","news","store","createStore","applyMiddleware","thunkMiddleware","Setting","Card","style","textAlign","fontSize","height","Music","Navbar","useSelector","useDispatch","nav","to","activeClassName","active","display","alignItems","justifyContent","item_NewMessage","MailOutlined","setting","Header","header","logotype","alt","width","position","loginBlockPosition","loginBlockName","loginButton","loginBtn","HeaderContainer","this","React","Component","connect","maxLength30","ReduxLoginForm","reduxForm","onSubmit","handleSubmit","inputForm","inputForm_Inputs","undefined","Button","variant","ListGroup","Item","color","textIndent","withAuthRedirect","fallback","Preloader","News","margin","borderColor","maxHeight","controls","typePost","Body","backgroundColor","Text","content","marginRight","likePost","dislikePost","deletePost","prevBtn","getMyPosts","NewsContainer","addPostThunk","setState","uploadBtn","uploadBtnLoading","recordBtn","addBtn","onPostChange","event","currentTarget","fileUpload","createRef","fileSelected","files","Array","from","first","finally","video","document","getElementById","recordMediaUser","typeMedia","navigator","mediaDevices","MediaRecorder","getUserMedia","audio","stream","recordStream","err","srcObject","play","recordVideo","mediaRecorder","isStop","recordBtnDisable","waitRecordBtn","start","ondataavailable","ev","getTracks","forEach","o","stop","blob","Blob","prevState","global","InputGroup","inputGroup","border","onChange","ref","current","click","disabled","marginLeft","loadMedia","borderRadius","DropdownButton","as","ButtonGroup","title","Dropdown","paddingTop","muted","Modal","show","onHide","closeButton","Title","Footer","promise","reverse","lastId","DialogsContainer","lazy","UsersContainer","ProfileContainer","App","catchAllUnhandledErrors","reason","alert","initializeApp","addEventListener","removeEventListener","classes","wrapper","exact","path","render","withSuspense","compose","withRouter","ReactDOM","serviceWorker","ready","registration","unregister","loading"],"mappings":"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","file":"static/js/main.f73b6294.chunk.js","sourcesContent":["export type FieldValidatorType = (value: string) => string | undefined\r\n\r\nexport const required: FieldValidatorType = value => {\r\n    if(value) return undefined;\r\n    return '   Обязательное поле'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (value) => {\r\n    if(value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n    return undefined;\r\n}","import React from 'react';\r\nimport styles from './FormControl.module.css'\r\nimport { Field, WrappedFieldMetaProps, WrappedFieldProps } from \"redux-form\";\r\nimport { Input } from 'antd';\r\nimport { FieldValidatorType } from '../../utilities/validation/validation';\r\nconst { TextArea } = Input;\r\n\r\ntype FormControlPropsType = {\r\n    meta: WrappedFieldMetaProps\r\n}\r\ntype PropsType = {\r\n    types: string | undefined \r\n}\r\n\r\nconst InputType: React.FC<FormControlPropsType & WrappedFieldProps & PropsType> = ({ input, meta, ...props }) => {\r\n    const hasError = meta.touched && meta.error\r\n    return (\r\n        <div className={`${styles.formControl} ${hasError ? styles.error : ''}`}>\r\n            {props.types === \"input\" ? <Input  {...input} {...props} />\r\n                : <TextArea  {...input} {...props} autoSize />}\r\n            {hasError && <span className={styles.errorText}>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function fieldValue(\r\n    validate: Array<FieldValidatorType> | FieldValidatorType,\r\n    name: string,\r\n    types: string | undefined ,\r\n    placeholder: string | undefined ,\r\n    type: string | undefined ) {\r\n    return <Field\r\n        validate={validate}\r\n        name={name}\r\n        placeholder={placeholder}\r\n        type={type}\r\n        component={InputType}\r\n        types={types}\r\n    />\r\n}","import { GlobalStateType, InferActionsTypes } from '../reduxStore';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { dialogsAPI } from '../../api/api';\r\n\r\nexport type UserInfoType = {\r\n  id: number\r\n  userName: string\r\n  hasNewMessages: boolean\r\n  lastDialogActivityDate: string\r\n  lastUserActivityDate: string\r\n  newMessagesCount: number\r\n  photos: { small: string, large: string }\r\n}\r\n\r\nexport type MessagesType = {\r\n  id: string\r\n  body: string\r\n  translatedBody: any | null\r\n  addedAt: string\r\n  senderId: number\r\n  senderName: string\r\n  recipientId: number\r\n  viewed: boolean\r\n  recipientName?: string\r\n  deletedBySender?: boolean\r\n  deletedByRecipient?: boolean\r\n  isSpam?: boolean\r\n  distributionId?: null | any\r\n  isSelect?: boolean\r\n}\r\n\r\nexport type UserMessagesType = {\r\n  items: Array<MessagesType>\r\n  totalCount?: number | undefined\r\n  error?: any | null\r\n}\r\n\r\nconst initialState = {\r\n  usersInfo: null as Array<UserInfoType> | null,\r\n  userMessages: {} as UserMessagesType,\r\n  openUserDialogsId: Number(window.location.hash.replace(\"#/dialogs/\", \"\")) || -1 as number,\r\n  newMessagesCount: 0 as number\r\n}\r\ntype InitialStateType = typeof initialState\r\n\r\nconst reduceDialogs = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case '/dialogs/GET_ALL_DIALOGS':\r\n    case '/dialogs/GET_USER_MESSAGES':\r\n    case '/dialogs/NEW_MESSAGES_COUNT':\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      }\r\n    case '/dialogs/SEND_MESSAGE':\r\n      return {\r\n        ...state,\r\n        userMessages: { items: [...state.userMessages.items, action.message] }\r\n      }\r\n    case '/dialogs/SELECT_MESSAGE':\r\n      return {\r\n        ...state,\r\n        userMessages: { items: action.selectMessage }\r\n      }\r\n    case '/dialogs/DELETE_MESSAGE':\r\n      return {\r\n        ...state,\r\n        userMessages: { items: state.userMessages.items.filter(item => item.id !== action.messageId) }\r\n      }\r\n    case '/dialogs/DELETE_GET_USER_MESSAGES':\r\n      return {\r\n        ...state,\r\n        userMessages: { items: [] },\r\n        openUserDialogsId: action.openUserDialogsId\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\ntype ActionsTypes = InferActionsTypes<typeof actionsDialogs>\r\ntype ThunkType = ThunkAction<Promise<void>, GlobalStateType, unknown, ActionsTypes>\r\n\r\nconst actionsDialogs = {\r\n  getAllDialogsAC: (usersInfo: Array<UserInfoType>) =>  ({ type: '/dialogs/GET_ALL_DIALOGS', payload: { usersInfo } } as const),\r\n  getUserMessagesAC: (userMessages: UserMessagesType, openUserDialogsId: number) => ({ type: '/dialogs/GET_USER_MESSAGES', payload: { userMessages, openUserDialogsId } } as const),\r\n  deleteGetUserMessagesAC: (openUserDialogsId: number) => ({ type: '/dialogs/DELETE_GET_USER_MESSAGES', openUserDialogsId } as const),\r\n  sendMessageAC: (message: MessagesType) => ({ type: '/dialogs/SEND_MESSAGE', message } as const),\r\n  deleteMessageAC: (messageId: string) => ({ type: '/dialogs/DELETE_MESSAGE', messageId } as const),\r\n  selectMessageAC: (selectMessage: Array<MessagesType>) => ({ type: '/dialogs/SELECT_MESSAGE', selectMessage } as const),\r\n  newMessagesCount: (newMessagesCount: number) => ({ type: '/dialogs/NEW_MESSAGES_COUNT', payload: { newMessagesCount } } as const)\r\n}\r\n\r\nexport const getAllDialogsThunk = (): ThunkType => async dispatch => {\r\n  const data = await dialogsAPI.getAllDialogs()\r\n  dispatch(actionsDialogs.getAllDialogsAC(data))\r\n  localStorage.removeItem('SelectMessage');\r\n}\r\n\r\nexport const getUserMessagesThunk = (userId: number): ThunkType => async dispatch => {\r\n  const data = await dialogsAPI.getListMessages(userId)\r\n  userId !== -1 ? dispatch(actionsDialogs.getUserMessagesAC(data, userId)) : dispatch(actionsDialogs.deleteGetUserMessagesAC(userId))\r\n}\r\n\r\nexport const sendMessageThunk = (userId: number, message: string): ThunkType => async dispatch => {\r\n  if (message) {\r\n    const response = await dialogsAPI.sendMessage(userId, message)\r\n    dispatch(actionsDialogs.sendMessageAC(response.data.message))\r\n  }\r\n}\r\n\r\nexport const deleteMessageThunk = (message: MessagesType): ThunkType => async (dispatch, getState) => {\r\n  await dialogsAPI.deleteMessage(message.id)\r\n  const stateMessageLength = getState().messagesPage.userMessages.items.length\r\n  const userId = getState().messagesPage.openUserDialogsId\r\n  stateMessageLength > 10 ? dispatch(actionsDialogs.deleteMessageAC(message.id)) : dispatch(getUserMessagesThunk(userId))\r\n}\r\n\r\nexport const selectMessageThunk = (messageId: string): ThunkType => async (dispatch, getState) => {\r\n  const stateMessage = getState().messagesPage.userMessages.items\r\n  const selectMessage = JSON.parse(localStorage.getItem(\"SelectMessage\") || \"[]\");\r\n  let arr = selectMessage\r\n\r\n  const newStateMessage = stateMessage.map(item => {\r\n    if (item.id === messageId) {\r\n\r\n      const isSelect = item.isSelect ? false : true;\r\n      isSelect === true ? arr.push(messageId) : arr = arr.filter((mes: string) => mes !== item.id)\r\n      return { ...item, isSelect };\r\n    }\r\n    return item\r\n  });\r\n\r\n  dispatch(actionsDialogs.selectMessageAC(newStateMessage))\r\n  localStorage.setItem(\"SelectMessage\", JSON.stringify(arr));\r\n}\r\n\r\nexport const startDialogThunk = (userId: number): ThunkType => async dispatch => {\r\n  const response = await dialogsAPI.startDialogs(userId)\r\n  if (response.resultCode === 0) {\r\n    dispatch(getUserMessagesThunk(userId))\r\n  }\r\n}\r\n\r\nexport const newMessagesCountThunk = (): ThunkType => async dispatch => {\r\n  const response = await dialogsAPI.newMessagesCount()\r\n  if (response.status === 200) dispatch(actionsDialogs.newMessagesCount(response.data))\r\n}\r\n\r\nexport default reduceDialogs;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControl_formControl__3Pv_s\",\"error\":\"FormControl_error__38NGt\",\"errorText\":\"FormControl_errorText__2ODR4\"};","import axios from 'axios';\r\nimport { ProfileType } from '../redux/reducers/reduceProfile';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0',\r\n    withCredentials: true,\r\n    headers:\r\n        { \"API-KEY\": \"fc98c8d1-fcc0-4027-a270-97c3e19bdaad\" }\r\n})\r\n\r\nexport const usersAPI = {\r\n   async getUsers(usersCount: number, numberPage: number) {\r\n        return await instance.get(`/users?count=${usersCount}&page=${numberPage}`)\r\n            .then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const followAPI = {\r\n    postFollow(userId: number) {\r\n        return instance\r\n            .post(`/follow/${userId}`)\r\n    },\r\n    deleteFollow(userId: number) {\r\n        return instance\r\n            .delete(`/follow/${userId}`)\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    getAuth() {\r\n        return instance\r\n            .get(`/auth/me`).then(response => response.data)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean, captcha: string | null) {\r\n        return instance\r\n            .post(`/auth/login`, {email, password, rememberMe, captcha})\r\n    },\r\n    logout() {\r\n        return instance\r\n            .delete(`/auth/login`)\r\n    },\r\n    getCaptcha() {\r\n        return instance\r\n            .get(`security/get-captcha-url`)\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number) {\r\n        return instance\r\n            .get(`/profile/${userId}`)\r\n    },\r\n    getUserStatus(userId: number) {\r\n        return instance\r\n            .get(`/profile/status/${userId}`)\r\n    },\r\n    getIsFollow(userId: number) {\r\n        return instance.get(`/follow/${userId}`)\r\n    },\r\n    updateUserStatus(status: string) {\r\n        return instance\r\n            .put(`/profile/status/`, {status})\r\n    },\r\n    saveAvatarPhoto(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append('image', photoFile)\r\n        return instance\r\n            .put(`/profile/photo`, formData, {\r\n                headers: {\r\n                    'Content-Type' : 'multipart/form-data'\r\n                }\r\n            })\r\n    },\r\n    saveProfileInfo(profileInfo: ProfileType) {\r\n        return instance\r\n            .put(`/profile`, profileInfo)\r\n    }\r\n}\r\n\r\nexport const dialogsAPI = {\r\n    startDialogs(userId: number) {\r\n        return (\r\n            instance.put(`dialogs/${userId}`).then(response => response.data)\r\n        )\r\n    },\r\n    getAllDialogs() {\r\n        return (\r\n            instance.get(`dialogs/`).then(response => response.data)\r\n        )\r\n    },\r\n    getListMessages(userId: number) {\r\n        return (\r\n            instance.get(`dialogs/${userId}/messages`).then(response => response.data)\r\n        )\r\n    },\r\n    sendMessage(userId: number, message: string) {\r\n        return (\r\n            instance.post(`dialogs/${userId}/messages`, {body: message}).then(response => response.data)\r\n        )\r\n    },\r\n    deleteMessage(messageId: string) {\r\n        return (\r\n            instance.delete(`dialogs/messages/${messageId}`).then(response => response.data)\r\n        )\r\n    },\r\n    newMessagesCount() {\r\n        return (\r\n            instance.get(`dialogs/messages/new/count`)\r\n        )\r\n    },\r\n};","import React from \"react\";\r\nimport styles from \"./Pagination.module.scss\";\r\nimport { CaretRightFilled, CaretLeftFilled, BackwardFilled, ForwardFilled } from '@ant-design/icons';\r\n\r\nlet pages = [] as Array<number>;\r\nlet maxPortionPages: number\r\n\r\nexport const filterPagesNumbers = (\r\n  totalCount: number,\r\n  usersCount: number,\r\n  portionNumber = 1,\r\n  portionSize = 10\r\n) => {\r\n  if (pages.length === 0) {\r\n    const pagesCount = Math.ceil(totalCount / usersCount);\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n      pages.push(i);\r\n    }\r\n    maxPortionPages = Math.ceil(pagesCount / portionSize);\r\n  }\r\n\r\n  const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n  const rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n  return pages.filter(\r\n    p => p >= leftPortionPageNumber && p <= rightPortionPageNumber\r\n  );\r\n};\r\n\r\ntype PropsType = {\r\n  numberPage: number\r\n  pagesNumbers: Array<number>\r\n  portionPagesNumbers: number\r\n  onNumberPage: (number: number, portionPagesNumbers: number) => void\r\n  onPagesNumbers: (portionPagesNumbers: number) => void\r\n}\r\n\r\nconst Pagination: React.FC<PropsType> = ({\r\n  numberPage,\r\n  onNumberPage,\r\n  pagesNumbers,\r\n  portionPagesNumbers,\r\n  onPagesNumbers\r\n}) => {\r\n\r\n  const jumpNext = () => {\r\n    onPagesNumbers(portionPagesNumbers + 1);\r\n  };\r\n  const jumpPrev = () => {\r\n    onPagesNumbers(portionPagesNumbers - 1);\r\n  };\r\n\r\n  const leftPortionPageNumber = pagesNumbers[0];\r\n  const rightPortionPageNumber = pagesNumbers[pagesNumbers.length - 1];\r\n\r\n  const next = () => {\r\n    if (numberPage < leftPortionPageNumber) {\r\n      onNumberPage(leftPortionPageNumber, portionPagesNumbers);\r\n    } else if (numberPage >= rightPortionPageNumber) {\r\n      onNumberPage(rightPortionPageNumber + 1, portionPagesNumbers + 1);\r\n    } else {\r\n      onNumberPage(numberPage + 1, portionPagesNumbers);\r\n    }\r\n  };\r\n\r\n  const prev = () => {\r\n    if (numberPage > rightPortionPageNumber) {\r\n      onNumberPage(rightPortionPageNumber, portionPagesNumbers);\r\n    } else if (numberPage <= leftPortionPageNumber) {\r\n      onNumberPage(leftPortionPageNumber - 1, portionPagesNumbers - 1);\r\n    } else {\r\n      onNumberPage(numberPage - 1, portionPagesNumbers);\r\n    }\r\n  };\r\n\r\n  return (\r\n\r\n    <div className={styles.pagination}>\r\n\r\n\r\n        <button\r\n          className={\r\n            portionPagesNumbers > 1 ? styles.jump : styles.displayNone\r\n          }\r\n          onClick={jumpPrev}\r\n        >\r\n          <span><BackwardFilled /></span>\r\n        </button>\r\n\r\n        <button\r\n          className={numberPage !== 1 ? styles.nextPrev : styles.displayNone}\r\n          onClick={prev}\r\n        >\r\n          <span><CaretLeftFilled /></span>\r\n        </button>\r\n \r\n\r\n      {pagesNumbers.map(p => {\r\n        return (\r\n          <button\r\n            className={\r\n              numberPage === p ? styles.pageNumber : styles.buttonsColor\r\n            }\r\n            key={p}\r\n            onClick={() => {\r\n              onNumberPage(p, portionPagesNumbers);\r\n            }}\r\n          >{` ${p}`}</button>\r\n        );\r\n      })}\r\n\r\n\r\n        <button\r\n          className={\r\n            pages.length > numberPage ? styles.nextPrev : styles.displayNone\r\n          }\r\n          onClick={next}\r\n        >\r\n          <span><CaretRightFilled /></span>\r\n\r\n        </button>\r\n        <button\r\n          className={\r\n            maxPortionPages > portionPagesNumbers ? styles.jump : styles.displayNone\r\n          }\r\n          onClick={jumpNext}\r\n        >\r\n          <span><ForwardFilled /></span>\r\n        </button>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"App_wrapper__2an5o\",\"content\":\"App_content__M6AU7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Preloader_wrapper__3t_O-\",\"loading\":\"Preloader_loading__2EkIt\"};","module.exports = \"data:image/gif;base64,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\"","import { InferActionsTypes } from './../reduxStore';\r\nimport { profileAPI, followAPI } from \"../../api/api\";\r\nimport { stopSubmit } from 'redux-form'\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { GlobalStateType } from '../reduxStore';\r\nimport { setAvatarThunk } from './reduceAuth';\r\n\r\nexport type PostType = { id: number, postText: string, likes: number, src: string | null }\r\n\r\nexport type ProfileType = {\r\n  aboutMe: string | null\r\n  contacts: {\r\n    skype: string | null\r\n    vk: string | null\r\n    facebook: string | null\r\n    icq: string | null\r\n    email: string | null\r\n    googlePlus: string | null\r\n    twitter: string | null\r\n    instagram: string | null\r\n    whatsApp: string | null\r\n  },\r\n  lookingForAJob: boolean\r\n  lookingForAJobDescription: string | null\r\n  fullName: string | null\r\n  userId: number\r\n  photos: PhotosType\r\n}\r\ntype PhotosType = {\r\n  small: string | null\r\n  large: string | null\r\n}\r\n\r\nconst localMyPosts = JSON.parse(localStorage.getItem(\"MyPosts\") || \"[]\")\r\n\r\nconst initialState = {\r\n  posts: localMyPosts.length === 0 ? [\r\n    {\r\n      id: 4, postText: \"К сожалению посты еще не реализованы в бэкенде. Поэтому для того 'чтобы потыкать' сделал временную реализацию через localStorage. Ниже есть кнопка очистки localStorage\", likes: 10, src: ''\r\n    },\r\n    {\r\n      id: 3, postText: \"Уверен, что хорошо))\", likes: 15, src: ''\r\n    },\r\n    {\r\n      id: 2, postText: \"Как ваши дела?\", likes: 7, src: ''\r\n    },\r\n    {\r\n      id: 1, postText: \"Привет)\", likes: 9, src: ''\r\n    }\r\n  ] : localMyPosts as Array<PostType>,\r\n  profile: null as ProfileType | null,\r\n  profileUpdate: null as boolean | null,\r\n  status: \"\" as string,\r\n  isFollow: false as boolean\r\n};\r\ntype InitialStateType = typeof initialState\r\n\r\nconst reduceProfile = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case '/profile/SET_USER_PROFILE':\r\n    case '/profile/PROFILE_UPDATE_SUCCESS':\r\n    case '/profile/SET_USER_STATUS':\r\n    case '/profile/ON_FOLLOW':\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    case '/profile/SAVE_PHOTO_SUCCESS':\r\n      return {\r\n        ...state,\r\n        profile: { ...state.profile, photos: action.photos } as ProfileType\r\n      };\r\n\r\n    case '/profile/ADD_POST':\r\n      return {\r\n        ...state,\r\n        posts: [\r\n          {\r\n            id: state.posts[0].id + 1,\r\n            postText: action.postText,\r\n            likes: 0,\r\n            src: action.photo\r\n          },\r\n          ...state.posts\r\n        ],\r\n      };\r\n\r\n    case \"/profile/LIKE_DISLIKE\":\r\n      return {\r\n        ...state,\r\n        posts: filterLikes(state.posts, action.postId, action.boolean)\r\n      }\r\n    case \"/profile/DELETE_MY_POST\":\r\n      return {\r\n        ...state,\r\n        posts: state.posts.filter(item => item.id !== action.postId)\r\n      }\r\n    case \"/profile/DELETE_ALL_MY_POSTS\":\r\n      return {\r\n        ...state,\r\n        posts: []\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actionsProfile>\r\ntype ThunkType = ThunkAction<Promise<void>, GlobalStateType, unknown, ActionsTypes>\r\n\r\nexport const actionsProfile = {\r\n  setUserProfile: (profile: ProfileType, isFollow: boolean) => ({ type: '/profile/SET_USER_PROFILE', payload: { profile, isFollow } } as const),\r\n  setUserStatus: (status: string) => ({ type: '/profile/SET_USER_STATUS', payload: { status } } as const),\r\n  onFollowAC: (isFollow: boolean) => ({ type: '/profile/ON_FOLLOW', payload: { isFollow } } as const),\r\n  saveProtoSuccess: (photos: PhotosType) => ({ type: '/profile/SAVE_PHOTO_SUCCESS', photos } as const),\r\n  profileUpdateSuccess: (profileUpdate: boolean | null) => ({ type: '/profile/PROFILE_UPDATE_SUCCESS', payload: { profileUpdate } } as const),\r\n  addNewPost: (postText: string, photo: string | null) => ({ type: '/profile/ADD_POST', postText, photo } as const),\r\n  likeDislikeMyPost: (postId: number, boolean: boolean) => ({ type: '/profile/LIKE_DISLIKE', postId, boolean } as const),\r\n  deleteMyPost: (postId: number) => ({ type: '/profile/DELETE_MY_POST', postId } as const),\r\n  deleteAllMyPosts: () => ({ type: '/profile/DELETE_ALL_MY_POSTS' } as const)\r\n}\r\n\r\nexport const getProfileThunk = (userId: number): ThunkType => async (dispatch) => {\r\n  const response = await profileAPI.getProfile(userId)\r\n  const isFollow = await profileAPI.getIsFollow(userId)\r\n  if (response.status === 200 && isFollow.status === 200) {\r\n    dispatch(actionsProfile.setUserProfile(response.data, isFollow.data));\r\n  }\r\n}\r\n\r\nexport const getUserStatus = (userId: number): ThunkType => async (dispatch) => {\r\n  const response = await profileAPI.getUserStatus(userId)\r\n  if (response.status === 200) dispatch(actionsProfile.setUserStatus(response.data));\r\n}\r\n\r\nexport const onFollowThunk = (userId: number, isFollow: boolean): ThunkType => async dispatch => {\r\n  const response = !isFollow ? await followAPI.postFollow(userId) : await followAPI.deleteFollow(userId)\r\n  if (response.status === 200) dispatch(actionsProfile.onFollowAC(!isFollow))\r\n}\r\n\r\n\r\nexport const updateUserStatus = (status: string): ThunkType => async (dispatch) => {\r\n  const response = await profileAPI.updateUserStatus(status)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(actionsProfile.setUserStatus(status));\r\n  }\r\n}\r\n\r\nexport const savePhoto = (photoFile: File): ThunkType => async (dispatch) => {\r\n  const response = await profileAPI.saveAvatarPhoto(photoFile)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(actionsProfile.saveProtoSuccess(response.data.data.photos))\r\n    dispatch(setAvatarThunk())\r\n  }\r\n}\r\n\r\nexport const saveProfile = (profileInfo: ProfileType): ThunkType => async (dispatch, getState) => {\r\n  const userId = getState().auth.userId || 0\r\n  const response = await profileAPI.saveProfileInfo(profileInfo)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(getProfileThunk(userId))\r\n    dispatch(actionsProfile.profileUpdateSuccess(true))\r\n  } else {\r\n    const errText = '   Invalid url format'\r\n    const responseError = response.data.messages[0].toLowerCase().slice(30, -1)\r\n    const stopSubmitErr = [{ facebook: errText }, { website: errText }, { vk: errText }, { twitter: errText }, { instagram: errText }, { youtube: errText }, { github: errText }, { mainLink: errText }]\r\n    const contact = [{ name: 'facebook', id: 0 }, { name: 'website', id: 1 }, { name: 'vk', id: 2 }, { name: 'twitter', id: 3 }, { name: 'instagram', id: 4 }, { name: 'youtube', id: 5 }, { name: 'github', id: 6 }, { name: 'mainlink', id: 7 }]\r\n    let errUrlFormat = {}\r\n    for (let item of contact) {\r\n      if (item.name === responseError) {\r\n        errUrlFormat = stopSubmitErr[item.id]\r\n      }\r\n    }\r\n    //@ts-ignore\r\n    dispatch(stopSubmit(\"profileUserInfo\", { contacts: errUrlFormat }))\r\n    dispatch(actionsProfile.profileUpdateSuccess(false))\r\n  }\r\n  setTimeout(() => {\r\n    dispatch(actionsProfile.profileUpdateSuccess(null))\r\n  }, 1000);\r\n}\r\n\r\nexport const likeDislikeMyPost = (postId: number, boolean: boolean): ThunkType => async dispatch => {\r\n  dispatch(actionsProfile.likeDislikeMyPost(postId, boolean))\r\n}\r\n\r\nconst filterLikes = (statePosts: Array<PostType>, postId: number, boolean: boolean) => {\r\n  return statePosts.map(item => {\r\n    if (item.id === postId) {\r\n      const newItem = boolean ? { ...item, likes: item.likes + 1 } : { ...item, likes: item.likes - 1 }\r\n      return newItem\r\n    }\r\n    return item\r\n  })\r\n}\r\n\r\nexport default reduceProfile;\r\n","import { usersAPI, followAPI } from \"../../api/api\";\r\nimport { filterPagesNumbers } from \"../../common/Pagination/Pagination\";\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { GlobalStateType, InferActionsTypes } from '../reduxStore';\r\n\r\nexport type UsersType = {\r\n  name: string\r\n  id: number\r\n  uniqueUrlName: null | any,\r\n  photos: {\r\n    small: null | string,\r\n    large: null | string\r\n  },\r\n  status: null | string,\r\n  followed: boolean\r\n}\r\n\r\nconst initialState = {\r\n  users: [] as Array<UsersType>,\r\n  usersCount: 10 as number,\r\n  totalCount: 0 as number,\r\n  numberPage: 1 as number,\r\n  isLoading: false as boolean,\r\n  pagesNumbers: [] as Array<number>,\r\n  portionPagesNumbers: 1 as number,\r\n};\r\ntype InitialStateType = typeof initialState\r\n\r\nconst reduceUsers = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case '/users/FOLLOW_UNFOLLOW':\r\n      return {\r\n        ...state,\r\n        users: followUnFollow(state.users, action.userId)\r\n      };\r\n    case '/users/SET_USERS':\r\n    case '/users/SET_NUMBER_PAGE':\r\n    case '/users/PAGES_NUMBERS':\r\n      return { ...state, ...action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actionsUser>\r\ntype ThunkType = ThunkAction<Promise<void>, GlobalStateType, unknown, ActionsTypes>\r\n\r\nconst followUnFollow = (users: Array<UsersType>, userId: number) => {\r\n  return users.map(u => {\r\n    if (u.id === userId) {\r\n      const boolean = u.followed ? false : true\r\n      return { ...u, followed: boolean };\r\n    }\r\n    return u;\r\n  })\r\n}\r\n\r\nconst actionsUser = {\r\n  setUsers: (users: Array<UsersType>, totalCount: number, isLoading: boolean, pagesNumbers: Array<number>, portionPagesNumbers: number) =>\r\n    ({ type: '/users/SET_USERS', payload: { users, totalCount, isLoading, pagesNumbers, portionPagesNumbers } } as const),\r\n  setNumberPage: (numberPage: number, isLoading: boolean) => ({ type: '/users/SET_NUMBER_PAGE', payload: { numberPage, isLoading } } as const),\r\n  followUnFollowAC: (userId: number) => ({ type: '/users/FOLLOW_UNFOLLOW', userId } as const),\r\n  pagesNumbersAC: (pagesNumbers: Array<number>, portionPagesNumbers: number) => ({ type: '/users/PAGES_NUMBERS', payload: { pagesNumbers, portionPagesNumbers } } as const)\r\n}\r\n\r\nexport const getUsersThunk = (pageNumber = 1, portionPagesNumbers = 1): ThunkType => async (dispatch, getState) => {\r\n  const usersCount = getState().usersPage.usersCount\r\n  dispatch(actionsUser.setNumberPage(pageNumber, true))\r\n\r\n  const response = await usersAPI.getUsers(usersCount, pageNumber)\r\n  if (response.error === null) {\r\n    const pagesNumbers = filterPagesNumbers(response.totalCount, usersCount, portionPagesNumbers)\r\n    dispatch(actionsUser.setUsers(response.items, response.totalCount, false, pagesNumbers, portionPagesNumbers));\r\n  }\r\n}\r\n\r\nexport const followUnFollowThunk = (userId: number, followed: boolean): ThunkType => async (dispatch) => {\r\n  const response = followed === true ? await followAPI.deleteFollow(userId) : await followAPI.postFollow(userId)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(actionsUser.followUnFollowAC(userId));\r\n  }\r\n}\r\n\r\nexport const pagesNumbersThunk = (portionNumber: number): ThunkType => async (dispatch, getState) => {\r\n  const usersCount = getState().usersPage.usersCount\r\n  const totalCount = getState().usersPage.totalCount\r\n  const pagesNumbers = filterPagesNumbers(totalCount, usersCount, portionNumber)\r\n  dispatch(actionsUser.pagesNumbersAC(pagesNumbers, portionNumber))\r\n}\r\n\r\nexport default reduceUsers;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__1myv_\",\"item_NewMessage\":\"Navbar_item_NewMessage__wcNP7\",\"item\":\"Navbar_item__wlmhR\",\"active\":\"Navbar_active__2P0AA\",\"setting\":\"Navbar_setting__18frZ\"};","module.exports = __webpack_public_path__ + \"static/media/loading.0e2358c3.gif\";","\r\nimport { authAPI, profileAPI } from \"../../api/api\";\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { GlobalStateType, InferActionsTypes } from '../reduxStore';\r\nimport { stopSubmit } from \"redux-form\";\r\n\r\nconst initialState = {\r\n  userId: null as number | null,\r\n  email: null as string | null,\r\n  login: null as string | null,\r\n  isAuth: false as boolean,\r\n  captchaUrl: null as string | null,\r\n  avatar: null as string | null\r\n};\r\ntype InitialStateType = typeof initialState\r\n\r\nconst reduceAuth = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case '/auth/me/SET_AUTH':\r\n    case '/auth/me/SET_CAPTCHA':\r\n    case \"/auth/AVATAR\":\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actionsAuth>\r\ntype ThunkType = ThunkAction<Promise<void>, GlobalStateType, unknown, ActionsTypes>\r\n\r\nexport const actionsAuth = {\r\n  setCaptchaUrl: (captchaUrl: string) => ({ type: '/auth/me/SET_CAPTCHA', payload: { captchaUrl } } as const),\r\n  setAuthUserData: (userId: number | null, email: string | null, login: string | null, isAuth: boolean) => ({ type: '/auth/me/SET_AUTH', payload: { userId, email, login, isAuth } } as const),\r\n  setAvatar: (avatar: string | null) => ({ type: '/auth/AVATAR', payload: { avatar } } as const)\r\n}\r\n\r\nexport const getAuthThunk = (): ThunkType => (dispatch) => {\r\n  return authAPI.getAuth()\r\n    .then((response) => {\r\n      if (response.resultCode === 0) {\r\n        const { id, email, login } = response.data\r\n        dispatch(actionsAuth.setAuthUserData(id, email, login, true));\r\n      }\r\n    });\r\n}\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string): ThunkType => async (dispatch) => {\r\n  const response = await authAPI.login(email, password, rememberMe, captcha)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(getAuthThunk());\r\n  } else {\r\n    let messageErr = response.data.messages.length > 0 ? response.data.messages[0] : 'Some Error'\r\n    //@ts-ignore\r\n    dispatch(stopSubmit('login', { _error: messageErr }))\r\n    if (response.data.resultCode === 10) {\r\n      dispatch(getCaptha())\r\n    }\r\n  }\r\n}\r\n\r\nexport const setAvatarThunk = (): ThunkType => async (dispatch, getState) => {\r\n  const myId = getState().auth.userId\r\n  if (myId !== null) {\r\n    const response = await profileAPI.getProfile(myId)\r\n    if (response.status === 200) {\r\n      dispatch(actionsAuth.setAvatar(response.data.photos.small))\r\n    }\r\n  }\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n  const response = await authAPI.logout()\r\n\r\n  if (!response.data.resultCode) {\r\n    dispatch(actionsAuth.setAuthUserData(null, null, null, false));\r\n    dispatch(actionsAuth.setAvatar(null))\r\n  }\r\n}\r\n\r\nexport const getCaptha = (): ThunkType => async (dispatch) => {\r\n  const response = await authAPI.getCaptcha()\r\n  const captchaUrl = response.data.url\r\n  dispatch(actionsAuth.setCaptchaUrl(captchaUrl))\r\n}\r\n\r\nexport default reduceAuth;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__1oErT\",\"displayNone\":\"Pagination_displayNone__1jzvl\",\"buttonsColor\":\"Pagination_buttonsColor__HVnS_\",\"jump\":\"Pagination_jump__2WwdN\",\"nextPrev\":\"Pagination_nextPrev__3zl2l\",\"pageNumber\":\"Pagination_pageNumber__1Rh7z\"};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { getAuthThunk } from \"./reduceAuth\";\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { GlobalStateType, InferActionsTypes } from '../reduxStore';\r\n\r\nconst INITIALIZED_SUCCESS = \"/auth/me/INITIALIZED_SUCCESS\";\r\nconst GLOBAL_ERROR = \"GLOBAL_ERROR\";\r\n\r\nconst initialState = {\r\n  initialized: false as boolean,\r\n  globalError: null as null | any\r\n};\r\ntype InitialStateType = typeof initialState\r\n\r\nconst reduceApp = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case INITIALIZED_SUCCESS:\r\n      return {\r\n        ...state,\r\n        initialized: true,\r\n      };\r\n    case GLOBAL_ERROR:\r\n      return {\r\n        ...state,\r\n        globalError: action.globalError,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\ntype ActionsTypes = InferActionsTypes<typeof actionsApp>\r\ntype ThunkType = ThunkAction<Promise<void>, GlobalStateType, unknown, ActionsTypes>\r\n\r\nconst actionsApp = {\r\n  setInitialization: () => ({ type: INITIALIZED_SUCCESS } as const),\r\n  setGlobalError: (globalError: any) => ({ type: GLOBAL_ERROR, globalError } as const)\r\n}\r\n\r\nexport const initializeApp = (): ThunkType => async (dispatch) => {\r\n  const promise = dispatch(getAuthThunk())\r\n  promise.finally(() => {\r\n    dispatch(actionsApp.setInitialization())\r\n  })\r\n}\r\n\r\nexport const globalErrorThunk = (): ThunkType => async (dispatch) => {\r\n  const promise = dispatch(getAuthThunk())\r\n  promise.finally(() => {\r\n    dispatch(actionsApp.setGlobalError(null))\r\n  })\r\n}\r\n\r\nexport default reduceApp;\r\n","import axios from 'axios';\r\nimport { NewsPostType } from '../redux/reducers/reduceNews';\r\n\r\nexport const baseURL = 'https://backend-dz11.herokuapp.com'\r\n// export const baseURL = 'http://localhost:9999'\r\n\r\nconst instance = axios.create({\r\n    baseURL,\r\n    headers:\r\n        { 'Content-Type': 'application/json' },\r\n})\r\n\r\nexport const postsAPI = {\r\n    async getPosts(lastSeenId: number) {\r\n        return await instance.get(`/posts/seenPosts/${lastSeenId}`)\r\n            .then(response => response.data)\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    },\r\n    async newPosts(firstSeenId: number) {\r\n        return await instance.get(`/posts/${firstSeenId}`)\r\n            .then(response => response.data)\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    },\r\n    async addPost(post: NewsPostType) {\r\n        return await instance.post(`/posts`, JSON.stringify(post))\r\n            .then(response => response.data)\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    },\r\n}\r\n\r\nexport const likeDislikeDeleteAPI = {\r\n    async like(postId: number) {\r\n        return await instance.post(`/posts/${postId}/likes`)\r\n            .then(response => response.data)\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    },\r\n    async dislike(postId: number) {\r\n        return await instance.delete(`/posts/${postId}/likes`)\r\n            .then(response => response.data)\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    },\r\n    async delete(postId: number) {\r\n        return await instance.delete(`/posts/${postId}`)\r\n            .then(response => response.data)\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    }\r\n}\r\n\r\nexport const mediaApi = {\r\n    async downloadFile(file: File | Blob) {\r\n        const formData = new FormData();\r\n        formData.append(\"media\", file);\r\n        return await instance.post(`/upload`, formData).then(response => response.data)\r\n    },\r\n}","import { postsAPI, likeDislikeDeleteAPI, mediaApi, baseURL } from \"../../api/apiMyBackend\";\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { GlobalStateType, InferActionsTypes } from '../reduxStore';\r\n\r\ntype AddPostFormDataType = {\r\n  type: string | null\r\n  file: string | null\r\n}\r\nlet addPostFormData: AddPostFormDataType = {\r\n  type: null,\r\n  file: null\r\n}\r\n\r\nexport type NewsPostType = {\r\n  id: number\r\n  content: string\r\n  type: string\r\n  file: string\r\n  likes?: number\r\n}\r\nconst initialState = {\r\n  posts: [] as Array<NewsPostType>,\r\n  firstSeenId: null as number | null,\r\n  newPostsButton: true as boolean,\r\n  lastSeenId: 0 as number,\r\n  prevPostsButton: false as boolean,\r\n  textPost: \"\" as string\r\n}\r\ntype initialStateType = typeof initialState\r\n\r\nconst reduceNews = (state = initialState, action: ActionsTypes): initialStateType => {\r\n  switch (action.type) {\r\n    case '/news/TEXT':\r\n      return {\r\n        ...state,\r\n        textPost: action.textPost\r\n      };\r\n    case '/news/GET_POSTS':\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      }\r\n    case '/news/SET_POSTS':\r\n      return {\r\n        ...state,\r\n        posts: [\r\n          ...state.posts,\r\n          ...action.posts\r\n        ],\r\n        lastSeenId: action.lastSeenId,\r\n        prevPostsButton: action.prevPostsButton\r\n      };\r\n    case '/news/SET_LIKES':\r\n      return {\r\n        ...state,\r\n        posts: likeDislikeDeletePost(state.posts, action.postId, action.likes)\r\n      }\r\n    case '/news/DELETE_POST':\r\n      return {\r\n        ...state,\r\n        posts: deletePostFilter(state.posts, action.postId)\r\n      }\r\n    case '/news/ADD_POST':\r\n      return {\r\n        ...state,\r\n        posts: [\r\n          action.post,\r\n          ...state.posts\r\n        ],\r\n        textPost: ''\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype ActionsTypes = InferActionsTypes<typeof actionsNews>\r\ntype ThunkType = ThunkAction<Promise<void>, GlobalStateType, unknown, ActionsTypes>\r\n\r\nexport const actionsNews = {\r\n  setPosts: (posts: Array<NewsPostType>, lastSeenId: number, prevPostsButton: boolean) => ({ type: '/news/SET_POSTS', posts, lastSeenId, prevPostsButton } as const),\r\n  getFirstPosts: (posts: Array<NewsPostType>, lastSeenId: number, prevPostsButton: boolean) => ({ type: '/news/GET_POSTS', payload: { posts, lastSeenId, prevPostsButton } } as const),\r\n  setLikes: (postId: number, likes: number) => ({ type: '/news/SET_LIKES', postId, likes } as const),\r\n  deletePostOfState: (postId: number) => ({ type: '/news/DELETE_POST', postId } as const),\r\n  textPostAdd: (textPost: string) => ({ type: '/news/TEXT', textPost } as const),\r\n  addPost: (post: NewsPostType) => ({ type: '/news/ADD_POST', post } as const)\r\n}\r\n\r\nexport const getMyPosts = (lastSeenId = 0): ThunkType => async (dispatch) => {\r\n  const promise = await postsAPI.getPosts(lastSeenId)\r\n\r\n  if (promise && promise.length !== 0) {\r\n    const data = promise.reverse()\r\n    const lastId = promise[promise.length - 1].id\r\n    if (lastSeenId === 0) {\r\n      if (promise.length < 5) {\r\n        dispatch(actionsNews.getFirstPosts(data, lastId, false))\r\n      } else {\r\n        dispatch(actionsNews.getFirstPosts(data, lastId, true))\r\n      }\r\n    } else {\r\n      if (promise.length < 5) {\r\n        dispatch(actionsNews.setPosts(data, lastId, false))\r\n      } else {\r\n        dispatch(actionsNews.setPosts(data, lastId, true))\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nconst likeDislikeDeletePost = (posts: Array<NewsPostType>, postId: number, likes: number) => {\r\n  return posts.map(post => {\r\n    if (post.id === postId) {\r\n      return { ...post, likes };\r\n    }\r\n    return post;\r\n  })\r\n}\r\n\r\nexport const likePost = (postId: number): ThunkType => async (dispatch) => {\r\n  const data = await likeDislikeDeleteAPI.like(postId)\r\n  dispatch(actionsNews.setLikes(postId, data.likes))\r\n}\r\n\r\nexport const dislikePost = (postId: number): ThunkType => async (dispatch) => {\r\n  const data = await likeDislikeDeleteAPI.dislike(postId)\r\n  dispatch(actionsNews.setLikes(postId, data.likes))\r\n}\r\n\r\nconst deletePostFilter = (posts: Array<NewsPostType>, postId: number) => {\r\n  return posts.filter(post => post.id !== postId)\r\n}\r\n\r\nexport const deletePost = (postId: number): ThunkType => async (dispatch) => {\r\n  await likeDislikeDeleteAPI.delete(postId)\r\n  dispatch(actionsNews.deletePostOfState(postId))\r\n}\r\n\r\n\r\nexport const addPostThunk = (content: string): ThunkType => async (dispatch) => {\r\n\r\n  const post = {\r\n    id: 0,\r\n    content,\r\n    type: addPostFormData.type || '',\r\n    file: addPostFormData.file || '',\r\n  }\r\n\r\n  if (content || addPostFormData.type !== null) {\r\n    const promise = await postsAPI.addPost(post)\r\n    dispatch(actionsNews.addPost(promise))\r\n  }\r\n  addPostFormData = {\r\n    type: null,\r\n    file: null\r\n  }\r\n}\r\n\r\nexport const saveMediaFile = async (file: File | Blob, type: string) => {\r\n  const response = await mediaApi.downloadFile(file)\r\n  const postType = !type ? response.types : type\r\n\r\n  addPostFormData = {\r\n    type: postType,\r\n    file: `${baseURL}/static/${response.name}`\r\n  }\r\n}\r\n\r\nexport default reduceNews;","\r\nimport { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport reduceDialogs from \"./reducers/reduceDialogs\";\r\nimport reduceProfile from \"./reducers/reduceProfile\";\r\nimport reduceUsers from \"./reducers/reduceUsers\";\r\nimport reduceAuth from \"./reducers/reduceAuth\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\n//@ts-ignore\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport reduceApp from \"./reducers/reduceApp\";\r\nimport reduceNews from \"./reducers/reduceNews\";\r\n\r\nlet rootReducer = combineReducers({\r\n  messagesPage: reduceDialogs,\r\n  profilePage: reduceProfile,\r\n  usersPage: reduceUsers,\r\n  auth: reduceAuth,\r\n  form: formReducer,\r\n  app: reduceApp,\r\n  news: reduceNews\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer\r\nexport type GlobalStateType = ReturnType<RootReducerType>\r\n\r\ntype PropertiesTypes<T> = T extends {[key: string]: infer U} ? U : never\r\nexport type InferActionsTypes<T extends {[key: string]: (...args: any[]) => any}> = ReturnType<PropertiesTypes<T>>\r\n\r\n\r\nlet store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\n\r\n//@ts-ignore\r\nwindow.store = store;\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst Setting = () => {\r\n    return <Card style={{textAlign: 'center', fontSize: '20px', height: '100px'}}>Данный раздел в разработке</Card>\r\n}\r\n\r\nexport default Setting;","import React from 'react';\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst Music = () => {\r\n    return <Card style={{textAlign: 'center', fontSize: '20px', height: '100px'}}>Данный раздел в разработке</Card>\r\n}\r\n\r\nexport default Music;","import React from \"react\";\r\nimport styles from \"../../styles/Navbar.module.scss\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { newMessagesCountThunk } from \"../../redux/reducers/reduceDialogs\";\r\nimport { GlobalStateType } from \"../../redux/reduxStore\";\r\nimport { MailOutlined } from '@ant-design/icons';\r\n\r\nconst Navbar = () => {\r\n  const newMessagesCount = useSelector((state: GlobalStateType) => state.messagesPage.newMessagesCount)\r\n  const isAuth = useSelector((state: GlobalStateType) => state.auth.isAuth)\r\n  const dispatch = useDispatch()\r\n  if (isAuth) dispatch(newMessagesCountThunk());\r\n\r\n  return (\r\n    <nav className={styles.nav}>\r\n      <div className={styles.item}>\r\n        <NavLink to=\"/profile\" activeClassName={styles.active}>\r\n          Профиль\r\n        </NavLink>\r\n      </div>\r\n      <div className={styles.item}>\r\n        <NavLink to=\"/dialogs\" activeClassName={styles.active}>\r\n          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            <span>Сообщения</span>\r\n            {newMessagesCount > 0 && <div className={styles.item_NewMessage}>\r\n              <span>\r\n                <MailOutlined />\r\n              </span>\r\n              <b>{newMessagesCount}</b>\r\n            </div>}\r\n          </div>\r\n        </NavLink>\r\n      </div>\r\n      <div className={styles.item}>\r\n        <NavLink to=\"/users\" activeClassName={styles.active}>\r\n          Пользователи\r\n        </NavLink>\r\n      </div>\r\n      <div className={styles.item}>\r\n        <NavLink to=\"/news\" activeClassName={styles.active}>\r\n          Новости\r\n        </NavLink>\r\n      </div>\r\n      <div className={styles.item}>\r\n        <NavLink to=\"/music\" activeClassName={styles.active}>\r\n          Музыка\r\n        </NavLink>\r\n      </div>\r\n      <div className={`${styles.item} ${styles.setting}`}>\r\n        <NavLink to=\"/setting\" activeClassName={styles.active}>\r\n          Настройки\r\n        </NavLink>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar\r\n\r\n","import React from \"react\";\r\nimport styles from \"../../styles/Header.module.scss\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\ntype PropsType = {\r\n  isAuth: boolean\r\n  login: string | null\r\n  avatar: string | null\r\n  logout: () => void\r\n  setAvatarThunk: () => void\r\n}\r\n\r\nconst Header: React.FC<PropsType> = props => {\r\n  if (props.isAuth) {\r\n    props.setAvatarThunk();\r\n  }\r\n  return (\r\n    <header className={styles.header}>\r\n      <div className={styles.logotype}>\r\n        <img\r\n          alt=\"Logotype\"\r\n          src=\"https://liputan60.files.wordpress.com/2018/02/cropped-00106-3d-company-logo-design-free-logo-online-template-03.png?w=200\"\r\n        />\r\n        <span>Social Network</span>\r\n      </div>\r\n\r\n      <div style={{ width: \"50%\", position: \"relative\" }}>\r\n        <div className={styles.loginBlockPosition}>\r\n          {props.isAuth ? (\r\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n              <NavLink to=\"/profile\" className={styles.loginBlockName}>\r\n                <span>{props.login}</span>\r\n                {props.avatar !== null && <img\r\n                  src={props.avatar}\r\n                  alt=\"ava\"\r\n                />}\r\n              </NavLink>\r\n              <div>\r\n                <button className={styles.loginButton} onClick={props.logout}>\r\n                  ВЫЙТИ\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n              <div className={styles.loginBtn}>\r\n                <NavLink to=\"/login\" activeClassName={styles.active}>\r\n                  ВОЙТИ\r\n              </NavLink>\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { logout, setAvatarThunk } from \"../../redux/reducers/reduceAuth\";\r\nimport { GlobalStateType } from \"../../redux/reduxStore\";\r\n\r\ntype PropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nclass HeaderContainer extends React.Component<PropsType> {\r\n  render() {\r\n    return (\r\n      <Header\r\n        isAuth={this.props.isAuth}\r\n        login={this.props.login}\r\n        logout={this.props.logout}\r\n        avatar={this.props.avatar}\r\n        setAvatarThunk={this.props.setAvatarThunk}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\ntype MapStateToPropsType = {\r\n  isAuth: boolean\r\n  login: string | null\r\n  avatar: string | null\r\n}\r\n\r\nconst mapStateToProps = (state: GlobalStateType): MapStateToPropsType => {\r\n  return {\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login,\r\n    avatar: state.auth.avatar\r\n  };\r\n};\r\n\r\ntype MapDispatchToPropsType = {\r\n  logout: () => void\r\n  setAvatarThunk: () => void\r\n}\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, {}, GlobalStateType >(mapStateToProps, { logout, setAvatarThunk })(HeaderContainer);\r\n","import React from \"react\";\r\nimport { reduxForm, InjectedFormProps } from \"redux-form\";\r\nimport {\r\n  maxLengthCreator,\r\n  required\r\n} from \"../../utilities/validation/validation\";\r\nimport { fieldValue } from \"../../common/FormControl/FormControl\";\r\nimport { connect } from \"react-redux\";\r\nimport { login } from \"../../redux/reducers/reduceAuth\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Card, Button, ListGroup } from \"react-bootstrap\";\r\nimport styles from \"../../styles/Login.module.scss\";\r\nimport { GlobalStateType } from \"../../redux/reduxStore\";\r\n\r\nconst maxLength30 = maxLengthCreator(30);\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<FormDataType, OwnProps> & OwnProps> = props => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <div className={styles.inputForm}>\r\n        <div className={styles.inputForm_Inputs}>\r\n          {fieldValue([required, maxLength30], \"email\", \"input\", \"Email\", undefined)}\r\n        </div>\r\n\r\n        <div className={styles.inputForm_Inputs}>\r\n          {fieldValue(\r\n            [required, maxLength30],\r\n            \"password\",\r\n            \"input\",\r\n            \"Password\",\r\n            \"password\"\r\n          )}\r\n        </div>\r\n\r\n        <div className={styles.rememberMe}>\r\n          {fieldValue([], \"rememberMe\", \"input\", undefined, \"checkbox\")}\r\n          <span>Запомнить</span>\r\n        </div>\r\n\r\n        <div className={styles.captcha}>\r\n          {props.captchaUrl && <img src={props.captchaUrl} alt=\"captcha\" />}\r\n          {props.captchaUrl && (\r\n            <div className={styles.inputForm_Inputs}>\r\n              {fieldValue(required, \"captcha\", \"input\", undefined, undefined)}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {props.error && (\r\n          <div className={styles.error}>\r\n            <span>{props.error}</span>\r\n          </div>\r\n        )}\r\n        <div>\r\n          <Button variant=\"success\" type=\"submit\">\r\n            Войти\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\ntype OwnProps = { captchaUrl: string | null }\r\nconst ReduxLoginForm = reduxForm<FormDataType, OwnProps>({ form: \"login\" })(LoginForm);\r\n\r\ntype PropsType = MapStateToPropsType & MapDispatchToPropsType\r\ntype FormDataType = { email: string, password: string, rememberMe: boolean, captcha: string }\r\nconst Login: React.FC<PropsType> = props => {\r\n  const onSubmit = (formData: FormDataType) => {\r\n    props.login(\r\n      formData.email,\r\n      formData.password,\r\n      formData.rememberMe,\r\n      formData.captcha\r\n    );\r\n  };\r\n\r\n  if (props.isAuth) {\r\n    return <Redirect to=\"/profile\" />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.login}>\r\n      <Card style={{ width: \"400px\" }}>\r\n        <Card.Header style={{ textAlign: \"center\" }}>\r\n          <h3>Логинизация</h3>\r\n        </Card.Header>\r\n        <ListGroup>\r\n          <ListGroup.Item>\r\n            <ReduxLoginForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\r\n          </ListGroup.Item>\r\n          <ListGroup.Item>\r\n            <h5 style={{ textAlign: \"center\" }}>\r\n              Тестовый аккаунт для просмотра:\r\n            </h5>\r\n            <div>\r\n              <b>Email:</b> <span>free@samuraijs.com</span>\r\n            </div>\r\n            <div>\r\n              <b>Password:</b> <span>free</span>\r\n            </div>\r\n          </ListGroup.Item>\r\n          <ListGroup.Item>\r\n            <h5 style={{ textAlign: \"center\", color: \"gold\" }}>Примечание !</h5>\r\n            <div style={{ textIndent: \"25px\" }}>\r\n              Если не можете залогиниться, значит браузер блокирует файлы\r\n              cookie. Посмотрите в настройках браузера или используйте другой\r\n              браузер. Связано это с CORS, SameSite.\r\n            </div>\r\n          </ListGroup.Item>\r\n        </ListGroup>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\ntype MapStateToPropsType = {\r\n  captchaUrl: string | null\r\n  isAuth: boolean\r\n}\r\nconst mapStateToProps = (state: GlobalStateType): MapStateToPropsType => {\r\n  return {\r\n    captchaUrl: state.auth.captchaUrl,\r\n    isAuth: state.auth.isAuth\r\n  };\r\n};\r\ntype MapDispatchToPropsType = {\r\n  login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\r\n}\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, {}, GlobalStateType>(mapStateToProps, { login })(Login);\r\n","import React, { Suspense } from 'react';\r\nimport Preloader from '../common/Preloader/Preloader';\r\n\r\nconst withAuthRedirect = Component => (props) => {\r\n    return <Suspense fallback={<Preloader />}>\r\n        <Component {...props} />\r\n    </Suspense>\r\n}\r\n\r\nexport default withAuthRedirect","import React from \"react\";\r\nimport styles from \"../../styles/News.module.scss\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport { Card, Button } from \"react-bootstrap\";\r\nimport { NewsPostType } from \"../../redux/reducers/reduceNews\";\r\n\r\ntype PropsType = {\r\n  posts: Array<NewsPostType>\r\n  lastSeenId: number\r\n  prevPostsButton: boolean\r\n  getMyPosts: (lastSeenId: number) => void\r\n  likePost: (postId: number) => void\r\n  dislikePost: (postId: number) => void\r\n  deletePost: (postId: number) => void\r\n}\r\n\r\nconst News: React.FC<PropsType> = (props) => {\r\n  const typePost = (post: NewsPostType) => {\r\n    if (post.type === \"image\") {\r\n      return <img style={{ maxHeight: '60vh', width: \"100%\" }} src={post.file} alt=\"\" />;\r\n    } else if (post.type === \"audio\") {\r\n      return <audio style={{ width: \"100%\" }} src={post.file} controls />;\r\n    } else if (post.type === \"video\") {\r\n      return <video style={{ maxHeight: '60vh', width: \"100%\" }} src={post.file} controls />;\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const previousPosts = () => {\r\n    props.getMyPosts(props.lastSeenId);\r\n  };\r\n\r\n  if (!props.posts.length) return <Preloader />;\r\n  return (\r\n    <>\r\n      {props.lastSeenId !== 0 &&\r\n        props.posts.map(post => (\r\n          <Card key={post.id} style={{ margin: \"5px\", borderColor: \"black\" }}>\r\n            {typePost(post)}\r\n            <Card.Body style={{ backgroundColor: \"rgb(215, 215, 215)\", }} >\r\n              <Card.Text style={{ fontSize: \"20px\" }} >{post.content}</Card.Text>\r\n              <span style={{ marginRight: \"10px\", fontSize: \"20px\" }} >{`💗 ${post.likes}`}</span>\r\n              <Button variant=\"outline-success\" onClick={() => { props.likePost(post.id) }}>{`👍`}</Button>\r\n              <Button variant=\"outline-warning\" onClick={() => { props.dislikePost(post.id) }}>{`👎`}</Button>\r\n              <Button variant=\"outline-danger\" onClick={() => { props.deletePost(post.id) }}>Удалить</Button>\r\n            </Card.Body>\r\n          </Card>\r\n        ))}\r\n\r\n      <Button variant=\"secondary\"\r\n        className={!props.prevPostsButton ? styles.displayNone : styles.prevBtn}\r\n        onClick={previousPosts}\r\n      >\r\n        Показать еще\r\n        </Button>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default News;\r\n","import React from \"react\";\r\nimport News from \"./News\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getMyPosts,\r\n  likePost,\r\n  dislikePost,\r\n  deletePost,\r\n  addPostThunk,\r\n  actionsNews,\r\n  saveMediaFile,\r\n  NewsPostType\r\n} from \"../../redux/reducers/reduceNews\";\r\nimport {\r\n  InputGroup,\r\n  FormControl,\r\n  Button,\r\n  DropdownButton,\r\n  Dropdown,\r\n  Modal,\r\n  ButtonGroup\r\n} from \"react-bootstrap\";\r\nimport loadMedia from \"../../assets/image/loadMedia.gif\";\r\nimport styles from \"../../styles/News.module.scss\";\r\n//@ts-ignore\r\nimport Timer from \"react.timer\";\r\nimport { GlobalStateType } from \"../../redux/reduxStore\";\r\nimport { RouteComponentProps } from \"react-router\";\r\n\r\n\r\ntype PropsType = MapStateToPropsType & MapDispatchToPropsType & RouteComponentProps\r\n\r\ntype StateType = {\r\n  uploadBtn: boolean\r\n  uploadBtnLoading: boolean\r\n  recordVideo: boolean\r\n  recordBtn: boolean\r\n  recordBtnDisable: boolean\r\n  waitRecordBtn: boolean\r\n  error: boolean\r\n  errorText: string\r\n  addBtn: boolean\r\n}\r\nclass NewsContainer extends React.Component<PropsType, StateType> {\r\n  constructor(props: PropsType) {\r\n    super(props);\r\n    this.state = {\r\n      uploadBtn: false,\r\n      uploadBtnLoading: false,\r\n      recordVideo: false,\r\n      recordBtn: false,\r\n      recordBtnDisable: false,\r\n      waitRecordBtn: false,\r\n      error: false,\r\n      errorText: \"\",\r\n      addBtn: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.getMyPosts(0);\r\n  }\r\n\r\n  componentDidUpdate(prevState: PropsType) {\r\n    if (\r\n      this.props.posts.length !== prevState.posts.length &&\r\n      this.props.posts.length < 5\r\n    ) {\r\n      this.props.getMyPosts(0);\r\n    }\r\n  }\r\n\r\n  addPost = () => {\r\n    this.props.addPostThunk(this.props.textPost);\r\n    this.setState({\r\n      uploadBtn: false,\r\n      uploadBtnLoading: false,\r\n      recordBtn: false,\r\n      addBtn: false\r\n    });\r\n  };\r\n\r\n  onPostChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.props.textPostAdd(event.currentTarget.value);\r\n  };\r\n\r\n  fileUpload: React.RefObject<HTMLInputElement> = React.createRef();\r\n  fileSelected = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({ recordBtn: true, uploadBtnLoading: true, addBtn: true });\r\n    if (event.currentTarget.files !== null) {\r\n      const [first] = Array.from(event.currentTarget.files);\r\n      saveMediaFile(first, '').finally(() => {\r\n        this.setState({ addBtn: false, uploadBtnLoading: false });\r\n      });\r\n    }\r\n  };\r\n\r\n  video = (document.getElementById('media-user-stream') as any)\r\n  recordMediaUser = (typeMedia: string) => {\r\n    if (!navigator.mediaDevices || !window.MediaRecorder) {\r\n      this.setState({\r\n        error: true,\r\n        errorText: \"Нет подключенных медиа устройств\"\r\n      });\r\n      return;\r\n    }\r\n    if (typeMedia === \"audio\") {\r\n      navigator.mediaDevices\r\n        .getUserMedia({ audio: true })\r\n        .then(stream => {\r\n          this.recordStream(stream, typeMedia, false);\r\n        })\r\n        .catch(err => {\r\n          this.setState({ error: true, errorText: \"Нет доступа к микрофону\" });\r\n        });\r\n    }\r\n    if (typeMedia === \"video\") {\r\n      navigator.mediaDevices\r\n        .getUserMedia({ audio: true, video: true })\r\n        .then(stream => {\r\n          this.recordStream(stream, typeMedia, false);\r\n          this.video.srcObject = stream\r\n          this.video.play();\r\n          this.setState({ recordVideo: true });\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            error: true,\r\n            errorText: \"Нет доступа к камере и/или к микрофону\"\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  mediaRecorder: MediaRecorder | undefined = undefined\r\n  recordStream = (stream: MediaStream, type: string, isStop: boolean) => {\r\n    this.setState({\r\n      uploadBtn: true,\r\n      addBtn: true,\r\n      recordBtnDisable: true,\r\n      recordBtn: true,\r\n      waitRecordBtn: true\r\n    });\r\n\r\n    this.mediaRecorder = new MediaRecorder(stream);\r\n    this.mediaRecorder.start();\r\n    this.mediaRecorder.ondataavailable = (ev: BlobEvent) => {\r\n      stream.getTracks().forEach((o) => o.stop());\r\n      this.setState({ recordBtnDisable: false, recordVideo: false });\r\n      const blob = new Blob([ev.data]);\r\n      saveMediaFile(blob, type).finally(() => {\r\n        this.setState({ addBtn: false, recordBtn: false, waitRecordBtn: false });\r\n      });\r\n    };\r\n    if (isStop === true) this.mediaRecorder.stop();\r\n    setTimeout(() => {\r\n      if (this.mediaRecorder && this.mediaRecorder.state === \"recording\") {\r\n        this.mediaRecorder.stop();\r\n      }\r\n    }, 60000);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={styles.global}>\r\n        <InputGroup className={styles.inputGroup}   >\r\n          <FormControl\r\n            style={{ border: '1px solid black', height: '40px' }}\r\n            value={this.props.textPost}\r\n            placeholder=\"Введите текст вашего поста\"\r\n            onChange={this.onPostChange}\r\n          />\r\n\r\n          <input\r\n            ref={this.fileUpload}\r\n            type=\"file\"\r\n            onChange={this.fileSelected}\r\n            style={{ display: \"none\" }}\r\n          />\r\n\r\n          <Button\r\n            onClick={() => { if (this.fileUpload.current) this.fileUpload.current.click() }}\r\n            disabled={this.state.uploadBtn}\r\n            variant=\"secondary\"\r\n            style={{ marginLeft: \"2px\", border: '1px solid black' }}\r\n          >\r\n            {!this.state.uploadBtnLoading ? (\r\n              \" Загрузить\"\r\n            ) : (\r\n                <div>\r\n                  <img style={{ height: '20px' }} src={loadMedia} alt=\"Loading\" />\r\n                  <span> Ждите...</span>\r\n                </div>\r\n              )}\r\n          </Button>\r\n\r\n          {!this.state.recordBtnDisable ? (\r\n            !this.state.waitRecordBtn ?\r\n              <DropdownButton\r\n                key={'Запись'}\r\n                as={ButtonGroup}\r\n                title=\"Запись\"\r\n                id='dropdown-variants-secondary'\r\n                variant='secondary'\r\n                style={{ marginLeft: \"2px\", border: '1px solid black', borderRadius: '5px' }}\r\n                disabled={this.state.recordBtn}\r\n              >\r\n                <Dropdown.Item onClick={() => this.recordMediaUser(\"video\")}>\r\n                  Видео\r\n              </Dropdown.Item>\r\n                <Dropdown.Item onClick={() => this.recordMediaUser(\"audio\")}>\r\n                  Аудио\r\n              </Dropdown.Item>\r\n              </DropdownButton>\r\n              :\r\n              <Button style={{ marginLeft: \"2px\", border: '1px solid black', borderRadius: '5px' }} variant='secondary' disabled>\r\n                <div>\r\n                  <img style={{ height: '20px' }} src={loadMedia} alt=\"Loading\" />\r\n                  <span> Ждите...</span>\r\n                </div></Button>\r\n          ) : (\r\n              <Button variant=\"warning\" style={{ marginLeft: \"2px\", border: '1px solid black' }}\r\n                onClick={() => { if (this.mediaRecorder) this.mediaRecorder.stop() }}>\r\n                <Timer /> Стоп\r\n            </Button>\r\n            )}\r\n\r\n          <Button\r\n            disabled={this.state.addBtn}\r\n            style={{ marginLeft: \"2px\", border: '1px solid black' }}\r\n            variant=\"success\"\r\n            onClick={this.addPost}\r\n          >\r\n            Добавить\r\n          </Button>\r\n        </InputGroup>\r\n\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            paddingTop: \"42px\",\r\n          }}\r\n        >\r\n          <div className={!this.state.recordVideo ? styles.displayNone : ''}>\r\n            <video\r\n              id='media-user-stream'\r\n              style={{ width: \"100%\", border: '3px solid red' }}\r\n              muted={true}\r\n              ref={a => this.video = a}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <Modal\r\n          show={this.state.error}\r\n          onHide={() => this.setState({ error: false })}\r\n        >\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Ошибка !</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>{this.state.errorText}</Modal.Body>\r\n          <Modal.Footer>\r\n            <Button\r\n              variant=\"secondary\"\r\n              onClick={() => this.setState({ error: false })}\r\n            >\r\n              Close\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n\r\n\r\n        <News {...this.props} />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ntype MapStateToPropsType = {\r\n  posts: Array<NewsPostType>\r\n  lastSeenId: number\r\n  prevPostsButton: boolean\r\n  textPost: string\r\n}\r\n\r\nconst mapStateToProps = (state: GlobalStateType): MapStateToPropsType => {\r\n  return {\r\n    posts: state.news.posts,\r\n    lastSeenId: state.news.lastSeenId,\r\n    prevPostsButton: state.news.prevPostsButton,\r\n    textPost: state.news.textPost,\r\n  };\r\n};\r\n\r\ntype MapDispatchToPropsType = {\r\n  getMyPosts: (lastSeenId: number) => void\r\n  likePost: (postId: number) => void\r\n  dislikePost: (postId: number) => void\r\n  deletePost: (postId: number) => void\r\n  addPostThunk: (content: string) => void\r\n  textPostAdd: (textPost: string) => void\r\n  saveMediaFile: (file: File | Blob, type: string) => void\r\n}\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, {}, GlobalStateType>(mapStateToProps, {\r\n  getMyPosts,\r\n  likePost,\r\n  dislikePost,\r\n  deletePost,\r\n  addPostThunk,\r\n  textPostAdd: actionsNews.textPostAdd,\r\n  saveMediaFile\r\n})(NewsContainer);\r\n","import React, { ComponentType } from \"react\";\r\nimport classes from \"./App.module.scss\";\r\nimport { Route, withRouter, Switch, Redirect } from \"react-router-dom\";\r\nimport Setting from \"./components/Setting/Setting\";\r\nimport Music from \"./components/Music/Music\";\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport Login from \"./components/Login/Login\";\r\nimport { compose } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { initializeApp } from \"./redux/reducers/reduceApp\";\r\nimport Preloader from \"./common/Preloader/Preloader\";\r\n\r\nimport withSuspense from \"./hoc/withSuspense\";\r\nimport NewsContainer from \"./components/News/NewsContainer\";\r\nimport { GlobalStateType } from \"./redux/reduxStore\";\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'))\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'))\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'))\r\n\r\ntype PropsType = MapStateToPropsType & MapDispatchToPropsType\r\nclass App extends React.Component<PropsType> {\r\n    catchAllUnhandledErrors = (reason: any, promise: any) => {\r\n        let errorText = ''\r\n        if (reason.reason.message === 'Request failed with status code 403') {\r\n            errorText = 'Invalid \"API-KEY\" in api.js'\r\n        } else (\r\n            errorText = reason.reason.message\r\n        )\r\n        alert(errorText)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.initializeApp();\r\n        //@ts-ignore\r\n        window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        //@ts-ignore\r\n        window.removeEventListener('unhandledrejection', this.catchAllUnhandledErrors)\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) return <Preloader />\r\n        return (\r\n            <div className={classes.wrapper}>\r\n                <HeaderContainer />\r\n                <Navbar />\r\n                <div className={classes.content}>\r\n                    <Switch>\r\n                        <Route exact path=\"/\"><Redirect to=\"/profile\" /></Route>\r\n                        <Route path=\"/profile/:userId?\" render={withSuspense(ProfileContainer)} />\r\n                        <Route path=\"/dialogs/:userId?\" render={withSuspense(DialogsContainer)} />\r\n                        <Route path=\"/news\" render={withSuspense(NewsContainer)} />\r\n                        <Route path=\"/music\" render={() => <Music />} />\r\n                        <Route path=\"/setting\" render={() => <Setting />} />\r\n                        <Route path=\"/users\" render={withSuspense(UsersContainer)} />\r\n                        <Route path=\"/login\" render={() => <Login />} />\r\n                        <Route path=\"*\" render={() => <div>404 NOT FOUND</div>} />\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n}\r\ntype MapStateToPropsType = { initialized: boolean }\r\nconst mapStateToProps = (state: GlobalStateType): MapStateToPropsType => {\r\n    return {\r\n        initialized: state.app.initialized\r\n    }\r\n}\r\ntype MapDispatchToPropsType = { initializeApp: () => void }\r\nexport default compose<ComponentType<{}>>(\r\n    connect<MapStateToPropsType, MapDispatchToPropsType, {}, GlobalStateType>(mapStateToProps, { initializeApp }),\r\n    withRouter)\r\n    (App);\r\n","import * as serviceWorker from \"./serviceWorker\";\r\nimport store from \"./redux/reduxStore\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n  //HashRouter использую для того что бы все нормально работало в github\r\n  <HashRouter>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </HashRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__3K4DH\",\"inputForm\":\"Login_inputForm__3L6Ab\",\"inputForm_Inputs\":\"Login_inputForm_Inputs__2szXF\",\"captcha\":\"Login_captcha__1LYvm\",\"error\":\"Login_error__3JqkF\",\"rememberMe\":\"Login_rememberMe__1SoxW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__Zq8MR\",\"logotype\":\"Header_logotype__3mWwI\",\"loginBlockPosition\":\"Header_loginBlockPosition__2s-AL\",\"loginBlockName\":\"Header_loginBlockName__1XJVo\",\"loginButton\":\"Header_loginButton__1gjBd\",\"loginBtn\":\"Header_loginBtn__1gb0m\",\"active\":\"Header_active__3zakO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"global\":\"News_global__3O1D9\",\"prevBtn\":\"News_prevBtn__Mo06_\",\"displayNone\":\"News_displayNone__3tBfN\",\"inputGroup\":\"News_inputGroup__UQG3W\"};","import React from \"react\";\r\nimport classes from \"./Preloader.module.css\";\r\nimport loading from \"../../assets/image/loading.gif\";\r\n\r\nconst Preloader = () => {\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <img className={classes.loading} src={loading} alt=\"Loader\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preloader;\r\n"],"sourceRoot":""}