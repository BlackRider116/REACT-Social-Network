(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[5],{596:function(e,a,s){e.exports=s.p+"static/media/avatarDefault.6c93098b.jpg"},597:function(e,a,s){"use strict";s.d(a,"a",(function(){return d}));var t=s(77),n=s(78),r=s(79),i=s(80),l=s(81),o=s(0),c=s.n(o),g=s(69),u=s(33),m=function(e){return{isAuth:e.auth.isAuth}},d=function(e){var a=function(a){function s(){return Object(t.a)(this,s),Object(r.a)(this,Object(i.a)(s).apply(this,arguments))}return Object(l.a)(s,a),Object(n.a)(s,[{key:"render",value:function(){return this.props.isAuth?c.a.createElement(e,this.props):c.a.createElement(g.a,{to:"/login"})}}]),s}(c.a.Component);return Object(u.b)(m)(a)}},598:function(e,a,s){e.exports={dialogsPage:"Dialogs_dialogsPage__Vj-n5",cardDialogs:"Dialogs_cardDialogs__1uSuo",dialogUser:"Dialogs_dialogUser__3ZW-R",dialogUser_active:"Dialogs_dialogUser_active__Gv5WR",dialogUser_Item:"Dialogs_dialogUser_Item__3Msgq",activeName:"Dialogs_activeName__2eTHX",message:"Dialogs_message__2tLdL",message_card:"Dialogs_message_card__3_tVC",message_card_select:"Dialogs_message_card_select__3US-J",message_delete:"Dialogs_message_delete__347JM",message_left:"Dialogs_message_left__3qHEf",message_right:"Dialogs_message_right__2SbB4",message_data_right:"Dialogs_message_data_right__OoqIP",message_data_left:"Dialogs_message_data_left__1MamM",message_viewed:"Dialogs_message_viewed__275qw",input:"Dialogs_input__Ed3Pc"}},619:function(e,a,s){"use strict";s.r(a);var t=s(77),n=s(78),r=s(79),i=s(80),l=s(81),o=s(0),c=s.n(o),g=s(33),u=s(597),m=s(17),d=s(598),p=s.n(d),_=s(207),h=s(32),f=s(596),D=s.n(f),M=s(593),E=s(599),v=s(601),I=s.n(v),b=function(e){return c.a.createElement(M.a,{className:p.a.cardDialogs},c.a.createElement(E.Scrollbars,{style:{width:"100%",height:"100%"}},e.userInfo.map((function(a){return c.a.createElement(M.a,{key:a.id,className:e.openUserDialogsId===a.id?"".concat(p.a.dialogUser," ").concat(p.a.dialogUser_active):p.a.dialogUser},c.a.createElement("div",{className:p.a.dialogUser_Item},c.a.createElement(h.b,{to:"/profile/".concat(a.id)},c.a.createElement("img",{alt:a.id,src:a.photos.small?a.photos.small:D.a})),c.a.createElement(h.b,{to:"/dialogs/".concat(a.id),onClick:function(){return e.userMessages(a.id)}},c.a.createElement("div",null,a.userName),c.a.createElement("div",{style:{fontSize:"14px"}},"\u0411\u044b\u043b(a): ",c.a.createElement(I.a,{format:"DD-MM-YYYY HH:mm",style:{fontSize:"12px"}},a.lastUserActivityDate)),a.hasNewMessages&&c.a.createElement("span",{style:{fontSize:"14px",textAlign:"center",color:"red"}},"\u041d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439: ",a.newMessagesCount))))}))))},k=s(3),U=s.n(k),y=s(9),T=s(206),j=s(196),O=s(280),w=s(297),N=s(617),S=Object(O.a)({form:"newMessage"})((function(e){var a=function(){var a=Object(y.a)(U.a.mark((function a(s,t){return U.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.sendMessageThunk(e.userId,s.newMessage);case 2:t(e.reset("newMessage"));case 3:case"end":return a.stop()}}),a)})));return function(e,s){return a.apply(this,arguments)}}();return c.a.createElement("form",{onSubmit:e.handleSubmit(a)},c.a.createElement("div",{className:p.a.input},c.a.createElement(j.a,{name:"newMessage",component:"textarea",placeholder:" \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),c.a.createElement(w.a,{variant:"secondary",type:"submit"},"Ok")))})),x=function(e){var a=e.myId,s=Object(T.a)(e,["myId"]),t=s.userMessages.items||[];return c.a.createElement(M.a,{className:p.a.cardDialogs},c.a.createElement("div",{style:{height:"86vh"}},c.a.createElement(E.Scrollbars,{style:{width:"100%",height:"100%"}},t.map((function(e){return c.a.createElement("div",{key:e.id,className:"".concat(p.a.message)},c.a.createElement(M.a,{className:"".concat(e.senderId===a?p.a.message_right:p.a.message_left," ").concat(e.isSelect?"".concat(p.a.message_card_select," ").concat(p.a.message_card):p.a.message_card),onClick:function(){return s.selectMessageThunk(e.id)}},c.a.createElement("div",null,e.body.replace("<br />",""),e.isSelect&&e.senderId===a&&c.a.createElement("span",null,c.a.createElement(N.a,{className:p.a.message_delete,onClick:function(){return s.deleteMessageThunk(e)}}))),c.a.createElement(I.a,{format:"DD-MM-YYYY HH:mm",className:e.senderId===a?p.a.message_data_right:p.a.message_data_left},e.addedAt),e.senderId===a&&!e.viewed&&c.a.createElement("div",{className:p.a.message_viewed},"\u043d\u0435 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043e")))})))),-1!==s.openUserDialogsId&&c.a.createElement(S,{sendMessageThunk:s.sendMessageThunk,userId:s.openUserDialogsId}))},A=s(83),P=function(e){function a(){return Object(t.a)(this,a),Object(r.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllDialogsThunk(),-1!==this.props.openUserDialogsId&&this.props.getUserMessagesThunk(this.props.openUserDialogsId)}},{key:"componentWillUnmount",value:function(){this.props.getUserMessagesThunk(-1)}},{key:"render",value:function(){return null===this.props.usersInfo?c.a.createElement(A.a,null):0===this.props.usersInfo.length?c.a.createElement(M.a,{style:{textAlign:"center",fontSize:"20px",height:"100px"}},"\u0423 \u0412\u0430\u0441 \u043d\u0435\u0442 \u043d\u0430\u0447\u0430\u0442\u044b\u0445 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432. \u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",c.a.createElement(h.b,{to:"/users"}," \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")):c.a.createElement("div",{className:p.a.dialogsPage},c.a.createElement("div",null,c.a.createElement(b,{userInfo:this.props.usersInfo,userMessages:this.props.getUserMessagesThunk,openUserDialogsId:this.props.openUserDialogsId})),c.a.createElement("div",null,c.a.createElement(x,{userMessages:this.props.userMessages,openUserDialogsId:this.props.openUserDialogsId,myId:this.props.myId,sendMessageThunk:this.props.sendMessageThunk,selectMessageThunk:this.props.selectMessageThunk,deleteMessageThunk:this.props.deleteMessageThunk})))}}]),a}(c.a.Component);a.default=Object(m.d)(Object(g.b)((function(e){return{usersInfo:e.messagesPage.usersInfo,userMessages:e.messagesPage.userMessages,openUserDialogsId:e.messagesPage.openUserDialogsId,myId:e.auth.userId}}),{getAllDialogsThunk:_.c,getUserMessagesThunk:_.d,sendMessageThunk:_.f,deleteMessageThunk:_.b,selectMessageThunk:_.e}),u.a)(P)}}]);
//# sourceMappingURL=5.ae9e27d9.chunk.js.map